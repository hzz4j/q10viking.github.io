<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/images/favicon-32x32.png"><title>é™é»˜ã®Blog</title><meta name="description" content="é™é»˜çš„Vuepress Blog">
    <link rel="preload" href="/assets/js/runtime~app.2c87fbe0.js" as="script"><link rel="preload" href="/assets/css/styles.b779b927.css" as="style"><link rel="preload" href="/assets/js/95615.aba5921d.js" as="script"><link rel="preload" href="/assets/js/app.4aafd1f6.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.b779b927.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">é™é»˜ã®Blog</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/topicNav/" class="nav-link" aria-label="ğŸ“—Menu"><!--[--><!--]--> ğŸ“—Menu <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/aboutme/" class="nav-link" aria-label="AboutMe"><!--[--><!--]--> AboutMe <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Q10Viking/q10viking.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/topicNav/" class="nav-link" aria-label="ğŸ“—Menu"><!--[--><!--]--> ğŸ“—Menu <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/aboutme/" class="nav-link" aria-label="AboutMe"><!--[--><!--]--> AboutMe <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Q10Viking/q10viking.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item"></p><ul class=""><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#docker-compose-å®¹å™¨ç¼–æ’" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Docker Composeï¼ˆå®¹å™¨ç¼–æ’ï¼‰"><!--[--><!--]--> Docker Composeï¼ˆå®¹å™¨ç¼–æ’ï¼‰ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#å¿«é€Ÿå…¥é—¨" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="å¿«é€Ÿå…¥é—¨"><!--[--><!--]--> å¿«é€Ÿå…¥é—¨ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#docker-composeç®¡ç†å®¹å™¨çš„ç»“æ„" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Docker Composeç®¡ç†å®¹å™¨çš„ç»“æ„"><!--[--><!--]--> Docker Composeç®¡ç†å®¹å™¨çš„ç»“æ„ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#docker-compose-ymlå¸¸ç”¨æŒ‡ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="docker-compose.ymlå¸¸ç”¨æŒ‡ä»¤"><!--[--><!--]--> docker-compose.ymlå¸¸ç”¨æŒ‡ä»¤ <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#image" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="image"><!--[--><!--]--> image <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#build" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="build"><!--[--><!--]--> build <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#command" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="command"><!--[--><!--]--> command <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#links" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="links"><!--[--><!--]--> links <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#external-links" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="external_links"><!--[--><!--]--> external_links <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#ports" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ports"><!--[--><!--]--> ports <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#expose" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="expose"><!--[--><!--]--> expose <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#volumes" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="volumes"><!--[--><!--]--> volumes <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#volumes-from" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="volumes_from"><!--[--><!--]--> volumes_from <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#environments" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="environments"><!--[--><!--]--> environments <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#env-file" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="env_file"><!--[--><!--]--> env_file <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#extends" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="extends"><!--[--><!--]--> extends <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#net" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="net"><!--[--><!--]--> net <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#dns" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="dns"><!--[--><!--]--> dns <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/10%20docker%20compose.html#dns-search" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="dns_search"><!--[--><!--]--> dns_search <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="docker-compose-å®¹å™¨ç¼–æ’" tabindex="-1"><a class="header-anchor" href="#docker-compose-å®¹å™¨ç¼–æ’" aria-hidden="true">#</a> Docker Composeï¼ˆå®¹å™¨ç¼–æ’ï¼‰</h2><p>ä½¿ç”¨å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨ç³»ç»Ÿä¸€èˆ¬åŒ…å«è‹¥å¹²ä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªå¾®æœåŠ¡ä¸€èˆ¬éƒ½ä¼šéƒ¨ç½²å¤šä¸ªå®ä¾‹ã€‚å¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½è¦æ‰‹åŠ¨å¯åœï¼Œé‚£ä¹ˆæ•ˆç‡ä¹‹ä½ã€ç»´æŠ¤é‡ä¹‹å¤§å¯æƒ³è€ŒçŸ¥ã€‚</p><blockquote><p>ä½¿ç”¨ Docker Composeæ¥è½»æ¾ã€é«˜æ•ˆåœ°ç®¡ç†å®¹å™¨</p></blockquote><p><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose overview | Docker Documentation<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>q10viking@LAPTOP-PJLAUUSP:/$ <span class="token function">docker</span> compose version
Docker Compose version v2.15.1
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="å¿«é€Ÿå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿå…¥é—¨" aria-hidden="true">#</a> å¿«é€Ÿå…¥é—¨</h2><blockquote><p>æ–‡ä»¶ç»“æ„</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>q10viking@LAPTOP-PJLAUUSP:~/learndocker/learncompose$ tree
<span class="token builtin class-name">.</span>
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ eureka
    â”œâ”€â”€ Dockerfile
    â””â”€â”€ microservice-eureka-server-0.0.1-SNAPSHOT.jar
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>åœ¨docker-compose.yml ä¸­æ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>services:
  eureka:             <span class="token comment">#æŒ‡å®šæœåŠ¡å</span>
    image: hzz-microservice-server:0.0.1  <span class="token comment">#æŒ‡å®šé•œåƒåç§°</span>
    build: ./eureka   <span class="token comment">#æŒ‡å®šDockfileæ‰€åœ¨è·¯å¾„</span>
    ports:
      - <span class="token string">&quot;8761:8761&quot;</span>   <span class="token comment">#æŒ‡å®šç«¯å£æ˜ å°„</span>
    expose:
      - <span class="token number">8761</span>          <span class="token comment">#å£°æ˜å®¹å™¨å¯¹å¤–æš´éœ²çš„ç«¯å£</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>å¯åŠ¨</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> compose up ï¼ˆåé¢åŠ -då¯ä»¥åå°å¯åŠ¨<span class="token punctuation">)</span>     
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>q10viking@LAPTOP-PJLAUUSP:~/learndocker/learncompose$ <span class="token function">docker</span> compose up
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Running <span class="token number">2</span>/2
 â ¿ Network learncompose_default     Created                                                                        <span class="token number">0</span>.2s
 â ¿ Container learncompose-eureka-1  Created                                                                        <span class="token number">1</span>.0s
Attaching to learncompose-eureka-1
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/images/Docker/image-20230424130639588.png" alt="image-20230424130639588"></p><blockquote><p>docker composeä¼šåšä»¥ä¸‹å‡ ä»¶äº‹</p></blockquote><ul><li><p>åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ç½‘ç»œ<code>learncompose_default</code>ï¼Œé»˜è®¤ä»¥composeæ‰€åœ¨æ–‡ä»¶ç›®å½•ååŠ &quot;_default&quot;å‘½åï¼Œcomposeå†…çš„æ‰€æœ‰å®¹å™¨éƒ½ä¼šåŠ å…¥æ­¤ç½‘ç»œï¼Œå¯ä»¥ç›¸äº’ç”¨æœåŠ¡åè®¿é—®ã€‚æœ€å¥½è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token key atrule">redis-node6</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span><span class="token number">5.0</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>server <span class="token punctuation">-</span><span class="token punctuation">-</span>port 7005 <span class="token punctuation">-</span><span class="token punctuation">-</span>cluster<span class="token punctuation">-</span>enabled yes <span class="token punctuation">-</span><span class="token punctuation">-</span>cluster<span class="token punctuation">-</span>config<span class="token punctuation">-</span>file /data/nodes.conf <span class="token punctuation">-</span><span class="token punctuation">-</span>appendonly yes <span class="token punctuation">-</span><span class="token punctuation">-</span>bind 0.0.0.0
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;7005:7005&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;17005:17005&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./data/node6<span class="token punctuation">:</span>/data
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> mynet		<span class="token comment"># æœåŠ¡åŠ å…¥è¯¥ç½‘ç»œ</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">mynet</span><span class="token punctuation">:</span>		<span class="token comment"># è‡ªå®šä¹‰ç½‘ç»œ</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge	<span class="token comment"># ä½¿ç”¨æ¡¥æ¥é©±åŠ¨</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li><li><p>å¦‚æœé•œåƒ <code>hzz-microservice-server:0.0.1</code> ä¸å­˜åœ¨å…ˆæ„å»ºé•œåƒï¼Œå¦‚æœé•œåƒå­˜åœ¨åˆ™ä¸æ„å»ºï¼ŒåŠ ä¸Š <strong>--build</strong> å‚æ•°å¯ä»¥å¼ºåˆ¶å…ˆæ„å»ºé•œåƒï¼Œå¦‚æœé•œåƒä¹‹å‰æ„å»ºè¿‡ä¸”æ„å»ºæ–‡ä»¶æ²¡æœ‰å˜åŒ–æˆ–æ„å»ºçš„å†…å®¹æ²¡æœ‰å˜åŒ–ï¼Œå°±ç®—åŠ ä¸Š <strong>--build</strong> å‚æ•°ä¹Ÿä¸ä¼šé‡æ–°æ„å»º</p></li><li><p>æ ¹æ®æ„å»ºçš„é•œåƒåˆ›å»ºä¸€ä¸ªåç§°å« <code>learncompose-eureka-1</code> çš„å®¹å™¨</p></li><li><p>å¯åŠ¨å®¹å™¨</p></li></ul><hr><h2 id="docker-composeç®¡ç†å®¹å™¨çš„ç»“æ„" tabindex="-1"><a class="header-anchor" href="#docker-composeç®¡ç†å®¹å™¨çš„ç»“æ„" aria-hidden="true">#</a> Docker Composeç®¡ç†å®¹å™¨çš„ç»“æ„</h2><blockquote><p>Docker Composeå°†æ‰€ç®¡ç†çš„å®¹å™¨åˆ†ä¸ºä¸‰å±‚ï¼Œ<strong>åˆ†åˆ«æ˜¯å·¥ç¨‹ï¼ˆ projectï¼‰ï¼ŒæœåŠ¡ï¼ˆserviceï¼‰ä»¥åŠå®¹å™¨ï¼ˆ container)</strong></p></blockquote><ul><li><p>Docker Composeè¿è¡Œç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆ docker-compose.ymlã€ extendsæ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡æ–‡ä»¶ç­‰ï¼‰ç»„æˆä¸€ä¸ªå·¥ç¨‹ï¼ˆé»˜è®¤ä¸º docker-compose.ymlæ‰€åœ¨ç›®å½•çš„ç›®å½•åç§°ï¼‰ã€‚ä¸€ä¸ªå·¥ç¨‹å¯åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ä¸­å®šä¹‰äº†å®¹å™¨è¿è¡Œçš„é•œåƒã€å‚æ•°å’Œä¾èµ–ï¼Œä¸€ä¸ªæœåŠ¡å¯åŒ…æ‹¬å¤šä¸ªå®¹å™¨å®ä¾‹</p><blockquote><p>ä¸Šé¢ç¤ºä¾‹é‡Œå·¥ç¨‹åç§°æ˜¯ docker-compose.yml æ‰€åœ¨çš„ç›®å½•åã€‚è¯¥å·¥ç¨‹åŒ…å«äº†1ä¸ªæœåŠ¡ï¼ŒæœåŠ¡åç§°æ˜¯ eurekaï¼Œæ‰§è¡Œ docker-compose upæ—¶ï¼Œå¯åŠ¨äº†eurekaæœåŠ¡çš„1ä¸ªå®¹å™¨å®ä¾‹</p></blockquote></li><li><p>åŒä¸€ä¸ªdocker composeå†…éƒ¨çš„å®¹å™¨ä¹‹é—´å¯ä»¥ç”¨æœåŠ¡åç›¸äº’è®¿é—®ï¼Œ<strong>æœåŠ¡åå°±ç›¸å½“äºhostnameï¼Œå¯ä»¥ç›´æ¥ ping æœåŠ¡åï¼Œå¾—åˆ°çš„å°±æ˜¯æœåŠ¡å¯¹åº”å®¹å™¨çš„ipï¼Œå¦‚æœæœåŠ¡åšäº†æ‰©å®¹ï¼Œä¸€ä¸ªæœåŠ¡å¯¹åº”äº†å¤šä¸ªå®¹å™¨ï¼Œåˆ™ ping æœåŠ¡å ä¼šè½®è¯¢è®¿é—®æœåŠ¡å¯¹åº”çš„æ¯å°å®¹å™¨ip ï¼Œdockeråº•å±‚ç”¨äº†LVSç­‰æŠ€æœ¯å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªè´Ÿè½½å‡è¡¡</strong></p></li></ul><hr><h2 id="docker-compose-ymlå¸¸ç”¨æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#docker-compose-ymlå¸¸ç”¨æŒ‡ä»¤" aria-hidden="true">#</a> docker-compose.ymlå¸¸ç”¨æŒ‡ä»¤</h2><p>æ–‡ä»¶å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h3 id="image" tabindex="-1"><a class="header-anchor" href="#image" aria-hidden="true">#</a> <strong>image</strong></h3><p>æŒ‡å®šé•œåƒåç§°æˆ–è€…é•œåƒidï¼Œå¦‚æœè¯¥é•œåƒåœ¨æœ¬åœ°ä¸å­˜åœ¨ï¼ŒComposeä¼šå°è¯•pullä¸‹æ¥ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> image<span class="token operator">:</span> java<span class="token operator">:</span><span class="token number">8</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>â€‹</p><h3 id="build" tabindex="-1"><a class="header-anchor" href="#build" aria-hidden="true">#</a> <strong>build</strong></h3><p>æŒ‡å®šDockerfileæ–‡ä»¶çš„è·¯å¾„ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œä¾‹å¦‚ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> build: ./dir  
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨ä»¥æŒ‡å®šDockerfileå’Œå‚æ•°ï¼Œä¾‹å¦‚ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>build:
  context: ./dir
  dockerfile: Dockerfile-alternate
  args:
    buildno: <span class="token number">1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="command" tabindex="-1"><a class="header-anchor" href="#command" aria-hidden="true">#</a> <strong>command</strong></h3><p>è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>command: bundle <span class="token builtin class-name">exec</span> thin <span class="token parameter variable">-p</span> <span class="token number">3000</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªlistï¼Œç±»ä¼¼äºDockerfileæ€»çš„CMDæŒ‡ä»¤ï¼Œæ ¼å¼å¦‚ä¸‹</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>command: <span class="token punctuation">[</span>bundle, exec, thin, -p, <span class="token number">3000</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="links" tabindex="-1"><a class="header-anchor" href="#links" aria-hidden="true">#</a> <strong>links</strong></h3><p>æ˜¾ç¤ºé“¾æ¥åˆ°å…¶ä»–æœåŠ¡ä¸­çš„å®¹å™¨ã€‚å¯ä»¥æŒ‡å®šæœåŠ¡åç§°å’Œé“¾æ¥çš„åˆ«åä½¿ç”¨SERVICE:ALIAS çš„å½¢å¼ï¼Œæˆ–è€…åªæŒ‡å®šæœåŠ¡åç§°ï¼Œ</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>web:
  links:
   - db
   - db:database
   - redis
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="external-links" tabindex="-1"><a class="header-anchor" href="#external-links" aria-hidden="true">#</a> <strong>external_links</strong></h3><p>è¡¨ç¤ºé“¾æ¥åˆ°docker-compose.ymlå¤–éƒ¨çš„å®¹å™¨ï¼Œç”šè‡³å¹¶éComposeç®¡ç†çš„å®¹å™¨ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›æä¾›å…±äº«å®¹å™¨æˆ–å…±åŒæœåŠ¡ã€‚æ ¼å¼è·Ÿlinksç±»ä¼¼ï¼Œç¤ºä¾‹ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>external_links:
 - redis_1
 - project_db_1:mysql
 - project_db_1:postgresql
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ports" tabindex="-1"><a class="header-anchor" href="#ports" aria-hidden="true">#</a> <strong>ports</strong></h3><p>æš´éœ²ç«¯å£ä¿¡æ¯ã€‚ä½¿ç”¨å®¿ä¸»ç«¯å£:å®¹å™¨ç«¯å£çš„æ ¼å¼ï¼Œæˆ–è€…ä»…ä»…æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼ˆæ­¤æ—¶å®¿ä¸»æœºå°†ä¼šéšæœºæŒ‡å®šç«¯å£ï¼‰ï¼Œç±»ä¼¼äºdocker run -p ï¼Œç¤ºä¾‹ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ports:
 - <span class="token string">&quot;3000&quot;</span>
 - <span class="token string">&quot;3000-3005&quot;</span>
 - <span class="token string">&quot;8000:8000&quot;</span>
 - <span class="token string">&quot;9090-9091:8080-8081&quot;</span>
 - <span class="token string">&quot;49100:22&quot;</span>
 - <span class="token string">&quot;127.0.0.1:8001:8001&quot;</span>
 - <span class="token string">&quot;127.0.0.1:5000-5010:5000-5010&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="expose" tabindex="-1"><a class="header-anchor" href="#expose" aria-hidden="true">#</a> <strong>expose</strong></h3><p>æš´éœ²ç«¯å£ï¼Œåªå°†ç«¯å£æš´éœ²ç»™è¿æ¥çš„æœåŠ¡ï¼Œè€Œä¸æš´éœ²ç»™å®¿ä¸»æœºï¼Œç¤ºä¾‹ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>expose:
 - <span class="token string">&quot;3000&quot;</span>
 - <span class="token string">&quot;8000&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="volumes" tabindex="-1"><a class="header-anchor" href="#volumes" aria-hidden="true">#</a> <strong>volumes</strong></h3><p>å·æŒ‚è½½è·¯å¾„è®¾ç½®ã€‚å¯ä»¥è®¾ç½®å®¿ä¸»æœºè·¯å¾„ <code>ï¼ˆHOST:CONTAINERï¼‰</code> æˆ–åŠ ä¸Šè®¿é—®æ¨¡å¼ <code>ï¼ˆHOST:CONTAINER:roï¼‰</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>volumes:
  <span class="token comment"># Just specify a path and let the Engine create a volume</span>
  - /var/lib/mysql

  <span class="token comment"># Specify an absolute path mapping</span>
  - /opt/data:/var/lib/mysql

  <span class="token comment"># Path on the host, relative to the Compose file</span>
  - ./cache:/tmp/cache

  <span class="token comment"># User-relative path</span>
  - ~/configs:/etc/configs/:ro

  <span class="token comment"># Named volume</span>
  - datavolume:/var/lib/mysql
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="volumes-from" tabindex="-1"><a class="header-anchor" href="#volumes-from" aria-hidden="true">#</a> <strong>volumes_from</strong></h3><p>ä»å¦ä¸€ä¸ªæœåŠ¡æˆ–è€…å®¹å™¨æŒ‚è½½å·ã€‚å¯ä»¥æŒ‡å®šåªè¯»æˆ–è€…å¯è¯»å†™ï¼Œå¦‚æœè®¿é—®æ¨¡å¼æ²¡æœ‰æŒ‡å®šï¼Œåˆ™é»˜è®¤æ˜¯å¯è¯»å†™ã€‚ç¤ºä¾‹</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>volumes_from:
 - service_name
 - service_name:ro
 - container:container_name
 - container:container_name:rw
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="environments" tabindex="-1"><a class="header-anchor" href="#environments" aria-hidden="true">#</a> <strong>environment</strong>s</h3><p>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–è€…å­—å…¸ä¸¤ç§æ–¹å¼ã€‚åªæœ‰ä¸€ä¸ªkeyçš„ç¯å¢ƒå˜é‡å¯ä»¥åœ¨è¿è¡ŒComposeçš„æœºå™¨ä¸Šæ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œè¿™æœ‰åŠ©äºåŠ å¯†çš„æˆ–è€…ç‰¹æ®Šä¸»æœºçš„å€¼</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>environment:
  RACK_ENV: development
  SHOW: <span class="token string">&#39;true&#39;</span>
  SESSION_SECRET:

environment:
  - <span class="token assign-left variable">RACK_ENV</span><span class="token operator">=</span>development
  - <span class="token assign-left variable">SHOW</span><span class="token operator">=</span>true
  - SESSION_SECRET
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="env-file" tabindex="-1"><a class="header-anchor" href="#env-file" aria-hidden="true">#</a> <strong>env_file</strong></h3><p>ä»æ–‡ä»¶ä¸­è·å–ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä¸ºå•ç‹¬çš„æ–‡ä»¶è·¯å¾„æˆ–åˆ—è¡¨ã€‚å¦‚æœé€šè¿‡ docker-compose -f FILE æŒ‡å®šäº†æ¨¡æ¿æ–‡ä»¶ï¼Œåˆ™ env_file ä¸­è·¯å¾„ä¼šåŸºäºæ¨¡æ¿æ–‡ä»¶è·¯å¾„ã€‚å¦‚æœæœ‰å˜é‡åç§°ä¸ environment æŒ‡ä»¤å†²çªï¼Œåˆ™ä»¥envirment ä¸ºå‡†</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>env_file: .env

env_file:
  - ./common.env
  - ./apps/web.env
  - /opt/secrets.env
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="extends" tabindex="-1"><a class="header-anchor" href="#extends" aria-hidden="true">#</a> <strong>extends</strong></h3><p>ç»§æ‰¿å¦ä¸€ä¸ªæœåŠ¡ï¼ŒåŸºäºå·²æœ‰çš„æœåŠ¡è¿›è¡Œæ‰©å±•</p><h3 id="net" tabindex="-1"><a class="header-anchor" href="#net" aria-hidden="true">#</a> <strong>net</strong></h3><p>è®¾ç½®ç½‘ç»œæ¨¡å¼ã€‚ç¤ºä¾‹ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>net: <span class="token string">&quot;bridge&quot;</span>
net: <span class="token string">&quot;host&quot;</span>
net: <span class="token string">&quot;none&quot;</span>
net: <span class="token string">&quot;container:[service name or container name/id]&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="dns" tabindex="-1"><a class="header-anchor" href="#dns" aria-hidden="true">#</a> <strong>dns</strong></h3><p>é…ç½®dnsæœåŠ¡å™¨ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>dns: <span class="token number">8.8</span>.8.8
dns:
  - <span class="token number">8.8</span>.8.8
  - <span class="token number">9.9</span>.9.9
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="dns-search" tabindex="-1"><a class="header-anchor" href="#dns-search" aria-hidden="true">#</a> <strong>dns_search</strong></h3><p>é…ç½®DNSçš„æœç´¢åŸŸï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>dns_search: example.com
dns_search:
  - dc1.example.com
  - dc2.example.com
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> â† <a href="/Docker/" class="nav-link router-link-active" aria-label="Back To ç›®å½•"><!--[--><!--]--> Back To ç›®å½• <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.2c87fbe0.js" defer></script><script src="/assets/js/95615.aba5921d.js" defer></script><script src="/assets/js/app.4aafd1f6.js" defer></script>
  </body>
</html>
