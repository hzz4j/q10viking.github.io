<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/images/favicon-32x32.png"><title>é™é»˜ã®Blog</title><meta name="description" content="é™é»˜çš„Vuepress Blog">
    <link rel="preload" href="/assets/js/runtime~app.2c87fbe0.js" as="script"><link rel="preload" href="/assets/css/styles.b779b927.css" as="style"><link rel="preload" href="/assets/js/95615.aba5921d.js" as="script"><link rel="preload" href="/assets/js/app.4aafd1f6.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.b779b927.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">é™é»˜ã®Blog</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/topicNav/" class="nav-link" aria-label="ğŸ“—Menu"><!--[--><!--]--> ğŸ“—Menu <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/aboutme/" class="nav-link" aria-label="AboutMe"><!--[--><!--]--> AboutMe <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Q10Viking/q10viking.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/topicNav/" class="nav-link" aria-label="ğŸ“—Menu"><!--[--><!--]--> ğŸ“—Menu <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/aboutme/" class="nav-link" aria-label="AboutMe"><!--[--><!--]--> AboutMe <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Q10Viking/q10viking.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item"></p><ul class=""><li><!--[--><a aria-current="page" href="/Docker/12%20compose%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#ç¼–æ’ä¾èµ–ç¯å¢ƒ" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ç¼–æ’ä¾èµ–ç¯å¢ƒ"><!--[--><!--]--> ç¼–æ’ä¾èµ–ç¯å¢ƒ <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/Docker/12%20compose%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#å¯åŠ¨" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="å¯åŠ¨"><!--[--><!--]--> å¯åŠ¨ <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Docker/12%20compose%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#ç¼–æ’å¾®æœåŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ç¼–æ’å¾®æœåŠ¡"><!--[--><!--]--> ç¼–æ’å¾®æœåŠ¡ <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>å¦‚æœå¾®æœåŠ¡è¾ƒå¤šï¼Œåˆ™å¯ä»¥ç”¨docker composeæ¥ç»Ÿä¸€ç¼–æ’ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨docker composeæ¥ç»Ÿä¸€ç¼–æ’ç”µå•†é¡¹ç›®çš„äº”ä¸ªå¾®æœåŠ¡ï¼šmall-authcenterï¼Œmall-gatewayï¼Œmall-memberï¼Œmall-orderï¼Œmall-product</p></div><h2 id="ç¼–æ’ä¾èµ–ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#ç¼–æ’ä¾èµ–ç¯å¢ƒ" aria-hidden="true">#</a> ç¼–æ’ä¾èµ–ç¯å¢ƒ</h2><ol><li>åˆ›å»ºä¸€ä¸ªç©ºç›®å½•docker-mall</li><li>åœ¨docker-mallç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç¼–æ’æ–‡ä»¶docker-compose-env.ymlï¼Œå†…å®¹å¦‚ä¸‹</li></ol><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code>version: &#39;3.8&#39;
services:
  mysql:
    image: mysql:5.7
    container_name: mysql
    command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci  #è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å¯åŠ¨mysqlå‘½ä»¤
    restart: always  #å…³æœºæˆ–è€…é‡å¯æœºå™¨æ—¶ï¼ŒdockeråŒæ—¶é‡å¯å®¹å™¨ï¼Œä¸€èˆ¬mysqlæœåŠ¡å¯ä»¥è¿™ä¹ˆè®¾ç½®ï¼Œä¿æŒæœåŠ¡ä¸€ç›´éƒ½åœ¨
    environment:
      MYSQL_ROOT_PASSWORD: root #è®¾ç½®rootå¸å·å¯†ç 
    ports:
      - 3306:3306
    volumes:
      - /mydata/mysql/data/db:/var/lib/mysql #æ•°æ®æ–‡ä»¶æŒ‚è½½
      - /mydata/mysql/data/conf:/etc/mysql/conf.d #é…ç½®æ–‡ä»¶æŒ‚è½½
      - /mydata/mysql/log:/var/log/mysql #æ—¥å¿—æ–‡ä»¶æŒ‚è½½
  redis:   
    image: redis:5.0
    container_name: redis
    command: redis-server --appendonly yes  
    volumes:
      - /mydata/redis/data:/data #æ•°æ®æ–‡ä»¶æŒ‚è½½
    ports:
      - 6379:6379
  rabbitmq:
    image: rabbitmq:3.7.25-management
    container_name: rabbitmq
    volumes:
      - /mydata/rabbitmq/data:/var/lib/rabbitmq #æ•°æ®æ–‡ä»¶æŒ‚è½½
      - /mydata/rabbitmq/log:/var/log/rabbitmq #æ—¥å¿—æ–‡ä»¶æŒ‚è½½
    ports:
      - 5672:5672
      - 15672:15672
  elasticsearch:
    image: elasticsearch:6.4.0
    container_name: elasticsearch
    environment:
      - &quot;cluster.name=elasticsearch&quot; #è®¾ç½®é›†ç¾¤åç§°ä¸ºelasticsearch
      - &quot;discovery.type=single-node&quot; #ä»¥å•ä¸€èŠ‚ç‚¹æ¨¡å¼å¯åŠ¨
      - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot; #è®¾ç½®ä½¿ç”¨jvmå†…å­˜å¤§å°ï¼Œç¨å¾®é…ç½®å¤§ç‚¹ï¼Œä¸ç„¶æœ‰å¯èƒ½å¯åŠ¨ä¸æˆåŠŸ
    volumes:
      - /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins #æ’ä»¶æ–‡ä»¶æŒ‚è½½
      - /mydata/elasticsearch/data:/usr/share/elasticsearch/data #æ•°æ®æ–‡ä»¶æŒ‚è½½
    ports:
      - 9200:9200
      - 9300:9300
  kibana:
    image: kibana:6.4.0
    container_name: kibana
    links:  #åŒä¸€ä¸ªcomposeæ–‡ä»¶ç®¡ç†çš„æœåŠ¡å¯ä»¥ç›´æ¥ç”¨æœåŠ¡åè®¿é—®ï¼Œå¦‚æœè¦ç»™æœåŠ¡å–åˆ«ååˆ™å¯ä»¥ç”¨linkså®ç°ï¼Œå¦‚ä¸‹é¢çš„eså°±æ˜¯elasticsearchæœåŠ¡çš„åˆ«å
      - elasticsearch:es #å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡
    depends_on:
      - elasticsearch #kibanaåœ¨elasticsearchå¯åŠ¨ä¹‹åå†å¯åŠ¨
    environment:
      - &quot;elasticsearch.hosts=http://es:9200&quot; #è®¾ç½®è®¿é—®elasticsearchçš„åœ°å€
    ports:
      - 5601:5601
  logstash:
    image: logstash:6.4.0
    container_name: logstash
    volumes:
      - /mydata/logstash/logstash-springboot.conf:/usr/share/logstash/pipeline/logstash.conf #æŒ‚è½½logstashçš„é…ç½®æ–‡ä»¶ï¼Œdockerå¯¹å•ä¸ªæ–‡ä»¶çš„æŒ‚è½½éœ€è¦å…ˆåœ¨å®¿ä¸»æœºå»ºå¥½å¯¹åº”æ–‡ä»¶æ‰èƒ½æŒ‚è½½æˆåŠŸ
    depends_on:
      - elasticsearch #kibanaåœ¨elasticsearchå¯åŠ¨ä¹‹åå†å¯åŠ¨
    links:
      - elasticsearch:es #å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡
    ports:
      - 4560:4560
  mongo:
    image: mongo:3.2
    container_name: mongo
    volumes:
      - /mydata/mongo/db:/data/db #æ•°æ®æ–‡ä»¶æŒ‚è½½
    ports:
      - 27017:27017
  nacos:
    image: nacos/nacos-server:1.4.2
    container_name: nacos
    environment:
      - MODE=standalone
    volumes:
      - /mydata/nacos/logs/:/home/nacos/logs
    ports:
      - &quot;8848:8848&quot;
  zookeeper:
    image: zookeeper:3.5
    ports:
      - 2181:2181 
    volumes:
      - /mydata/zookeeper/data:/data
      - /mydata/zookeeper/conf:/conf
      
  rocketmq:
    image: rocketmqinc/rocketmq
    container_name: rocketmq
    restart: always    
    ports:
      - 9876:9876
    volumes:
      - /mydata/rocketmq/logs:/home/rocketmq/logs
      - /mydata/rocketmq/store:/home/rocketmq/store
    command: sh mqnamesrv
  broker:
    image: rocketmqinc/rocketmq
    container_name: rmqbroker
    restart: always    
    ports:
      - 10909:10909
      - 10911:10911
      - 10912:10912
    volumes:
      - /mydata/rocketmq/logs:/home/rocketmq/logs
      - /mydata/rocketmq/store:/home/rocketmq/store
      - /mydata/rocketmq/conf/broker.conf:/opt/rocketmq-4.4.0/conf/broker.conf  #è¿™ä¸ªé…ç½®éœ€è¦å…ˆåœ¨å®¿ä¸»æœºå¯¹åº”ç›®å½•æ”¾å¥½broker.confé…ç½®æ–‡ä»¶,æ–‡ä»¶å†…å®¹å‚è€ƒä¸‹é¢æ–‡æ¡£
    command: sh mqbroker -n namesrv:9876 -c ../conf/broker.conf
    depends_on:
      - rocketmq
    environment:
      - JAVA_HOME=/usr/lib/jvm/jre
  console:
    image: styletang/rocketmq-console-ng
    container_name: rocketmq-console-ng
    restart: always    
    ports:
      - 8076:8080
    depends_on:
      - rocketmq
    environment:
      - JAVA_OPTS= -Dlogging.level.root=info -Drocketmq.namesrv.addr=rocketmq:9876 
      - Dcom.rocketmq.sendMessageWithVIPChannel=false
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br></div></div><p>broker.confæ–‡ä»¶å†…å®¹</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">brokerName</span> <span class="token punctuation">=</span> <span class="token value attr-value">broker-a</span>
<span class="token key attr-name">brokerId</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
<span class="token key attr-name">deleteWhen</span> <span class="token punctuation">=</span> <span class="token value attr-value">04</span>
<span class="token key attr-name">fileReservedTime</span> <span class="token punctuation">=</span> <span class="token value attr-value">48</span>
<span class="token key attr-name">brokerRole</span> <span class="token punctuation">=</span> <span class="token value attr-value">ASYNC_MASTER</span>
<span class="token key attr-name">flushDiskType</span> <span class="token punctuation">=</span> <span class="token value attr-value">ASYNC_FLUSH</span>
<span class="token comment"># å®¿ä¸»æœºIP</span>
<span class="token key attr-name">brokerIP1</span><span class="token punctuation">=</span><span class="token value attr-value">192.168.65.42</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨" aria-hidden="true">#</a> å¯åŠ¨</h3><p>å¯åŠ¨composeæ‰€æœ‰å®¹å™¨ï¼Œåœ¨docker-mallç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-env.yml up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="ç¼–æ’å¾®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ç¼–æ’å¾®æœåŠ¡" aria-hidden="true">#</a> ç¼–æ’å¾®æœåŠ¡</h2><ol><li><p>åœ¨docker-mallç›®å½•ä¸‹åˆ†åˆ«åˆ›å»ºmall-authcenterï¼Œmall-gatewayï¼Œmall-memberï¼Œmall-orderï¼Œmall-productç›®å½•ã€‚</p></li><li><p>åœ¨æ¯ä¸ªå¾®æœåŠ¡ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªDockerfileï¼Œå†…å®¹å¦‚ä¸‹ï¼Œä»¥mall-productæœåŠ¡ä¸ºä¾‹ï¼Œå…¶å®ƒå¾®æœåŠ¡éƒ½ç±»ä¼¼ä¿®æ”¹ï¼š</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># åŸºäºå“ªä¸ªé•œåƒ</span>
<span class="token instruction"><span class="token keyword">From</span> java:8</span>
<span class="token comment"># å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨</span>
<span class="token instruction"><span class="token keyword">ADD</span> mall-product-0.0.1-SNAPSHOT.jar /app.jar</span>
<span class="token comment"># é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;/app.jar&quot;</span>]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>åœ¨docker-mallç›®å½•ä¸‹æ–°å»ºå¾®æœåŠ¡ç¼–æ’æ–‡ä»¶docker-compose-app.ymlï¼Œå†…å®¹å¦‚ä¸‹</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code>version: &#39;3.8&#39;
services:
  mall-authcenter:
    image: mall/mall-authcenter:0.0.1  #æŒ‡å®šé•œåƒåç§°
    build: ./mall-authcenter  #æŒ‡å®šDockfileæ‰€åœ¨è·¯å¾„
    container_name: mall-authcenter  #æŒ‡å®šå¯åŠ¨å®¹å™¨åç§°
    ports:
      - 9999:9999
    volumes:
      - /etc/localtime:/etc/localtime:ro  #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´ï¼Œroä»£è¡¨readonlyåªè¯»
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:  #è®¿é—®ä¸åœ¨åŒä¸€ä¸ªcomposeæ–‡ä»¶ç®¡ç†çš„æœåŠ¡éœ€è¦ç”¨external_linksï¼Œå‰ææ˜¯è¿™äº›æœåŠ¡éƒ½åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹æ‰èƒ½æ­£å¸¸è®¿é—® 
      - nacos:nacos  #å¯ä»¥ç”¨nacosè¿™ä¸ªåŸŸåè®¿é—®nacosæœåŠ¡
      - mysql:db  #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  mall-gateway:
    image: mall/mall-gateway:0.0.1
    build: ./mall-gateway
    container_name: mall-gateway
    ports:
      - 8888:8888
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    depends_on:
      - mall-authcenter #gatewayåœ¨authcenterå¯åŠ¨ä¹‹åå†å¯åŠ¨
    external_links:
      - nacos:nacos
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  mall-member:
    image: mall/mall-member:0.0.1
    build: ./mall-member
    container_name: mall-member
    ports:
      - 8877:8877
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
      - mongo
      - redis
      - rabbitmq
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  tulingmall-product:
    image: mall/mall-product:0.0.1
    build: ./mall-product
    container_name: mall-product
    ports:
      - 8866:8866
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
      - redis
      - zookeeper
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  mall-order:
    image: mall/mall-order:0.0.1
    build: ./mall-order
    container_name: mall-order
    ports:
      - 8844:8844
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
      - redis
      - rabbitmq
      - namesrv:rockermq
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div></li><li><p>å¯åŠ¨composeçš„æ‰€æœ‰å¾®æœåŠ¡å®¹å™¨ï¼Œåœ¨docker-mallç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#è¿™é‡Œå¯åŠ¨çš„å¾®æœåŠ¡è·Ÿä¸Šé¢å¯åŠ¨çš„mysqlï¼Œredisè¿™äº›ä¸­é—´ä»¶æœåŠ¡å› ä¸ºéƒ½åœ¨docker-mallç›®å½•ä¸‹ï¼Œå³éƒ½æ˜¯åŒä¸€ä¸ªå·¥ç¨‹ä¸‹ï¼Œé»˜è®¤éƒ½åœ¨ç›¸åŒçš„ç½‘ç»œä¸‹ï¼Œå¯ä»¥ç›¸äº’è®¿é—®</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> docker-compose-app.yml up <span class="token parameter variable">-d</span>  
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> â† <a href="/Docker/" class="nav-link router-link-active" aria-label="Back To ç›®å½•"><!--[--><!--]--> Back To ç›®å½• <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.2c87fbe0.js" defer></script><script src="/assets/js/95615.aba5921d.js" defer></script><script src="/assets/js/app.4aafd1f6.js" defer></script>
  </body>
</html>
