---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To ç›®å½•
  link: /vuepress/
---



## sidebarä¾§è¾¹æ 

vuepressæ”¯æŒä¸¤ç§æ–¹å¼çš„ä¾§è¾¹æ 

1. æ‰€æœ‰é¡µé¢ä¼šä½¿ç”¨ç›¸åŒçš„ä¾§è¾¹æ 
2. ä¸åŒå­è·¯å¾„ä¸‹çš„é¡µé¢ä¼šä½¿ç”¨ä¸åŒçš„ä¾§è¾¹æ 

## è‡ªåŠ¨ç”Ÿæˆä¾§è¾¹æ 

ä½¿ç”¨ä¾èµ–[directory-tree - npm (npmjs.com)](https://www.npmjs.com/package/directory-tree)

```sh
npm i directory-tree
```



### æ‰€æœ‰é¡µé¢ç›¸åŒä¾§è¾¹æ 

> `docs\.vuepress\autoSiderbar\AllPageSameSildeBar.js`

```js
/**
 * æ‰€æœ‰é¡µé¢ä¼šä½¿ç”¨ç›¸åŒçš„ä¾§è¾¹æ 
 */

const path = require("path");
const dirTree = require("directory-tree");
const titles = require('./textTitle');
const SRC_PATH = path.resolve(__dirname, "../../");
var fs = require('fs');


/**
 * é»˜è®¤ä½¿ç”¨æ–‡ä»¶å¤¹åç§°ä½œä¸ºroute,å¦‚æœæ–‡ä»¶æœ‰ä¸­æ–‡åˆ™sidebarä¸ä¼šç”Ÿæ•ˆ
 * ç»´æŠ¤äº†ä¸€ä¸ªä»½textTitleæ¥å°†routeè½¬æ¢ä¸ºtitle
 */
function getTitle(name){
  if(titles[name] === undefined){
    console.log("===================================================================");
    console.warn("[Warn]: è¯·åœ¨textTitle.js æ–‡ä»¶ä¸­ç»´æŠ¤ä¸€ä¸ª %s çš„title",'vuepress1');
    console.log("===================================================================");
    return name;
  }
  return titles[name];
}

function toSidebarOption(tree = []) {
  if (!Array.isArray(tree)) return [];


  return tree.map((v) => {
    var stat = fs.statSync(v.path);
  
    if (stat.isDirectory()) {
      return {
        text: getTitle(v.name),
        // link: v.path.split("docs")[1]+'/',
        link: `/${v.name}/`,
        children: toSidebarOption(v.children),
      };
    } else {
      return {
        text: path.basename(v.path).replace(/\.md$/, ""),
        link: v.path.split("docs")[1]
      }
    }
  });
}

/**
 å»é™¤.vuepressçš„èŠ‚ç‚¹
 {
            "path":"d:/Github/vlog/docs/.vuepress",
            "name":".vuepress",
            "children":Array[4]
 }
 * @param {*} srcDir 
 * @returns 
 */
function removeDotvuepress(srcDir){
    return srcDir.children.filter(node => !node.path.endsWith('.vuepress') );
}

function autoGetSidebarOptionBySrcDir(srcPath = SRC_PATH) {
  const srcDir = dirTree(srcPath, {
    extensions: /\.md$/,
    normalizePath: true,
    exclude: /README.md|readme.md/
  });

  const children = removeDotvuepress(srcDir);
  //console.log(JSON.stringify(children))

  const sideBar = toSidebarOption(children);
  console.log('Generated sidebar finished :)');
  return sideBar;
}

//=================æµ‹è¯•===============================
//const result = autoGetSidebarOptionBySrcDir();
//console.log(JSON.stringify(result));

/** ç”Ÿæˆçš„ç»“æœ
[
    {
        "text":"Vuepressåšå®¢æ­å»º",
        "link":"/vuepress/",
        "children":[
            {
                "text":"01 æ­å»ºvuepress2",
                "link":"/vuepress/01 æ­å»ºvuepress2.md"
            },
            {
                "text":"02 å›¾ç‰‡å­˜æ”¾è·¯å¾„",
                "link":"/vuepress/02 å›¾ç‰‡å­˜æ”¾è·¯å¾„.md"
            },
            {
                "text":"03 ä¾§è¾¹æ é…ç½®",
                "link":"/vuepress/03 ä¾§è¾¹æ é…ç½®.md"
            }
        ]
    }
]
 */

module.exports = autoGetSidebarOptionBySrcDir;

```



### ä¸åŒå­è·¯å¾„ä¸åŒä¾§è¾¹æ â­

> `docs\.vuepress\autoSiderbar\DiffRouteDifSidebar.js`

```js
/**
 * ä¸åŒå­è·¯å¾„ä¸‹çš„é¡µé¢ä¼šä½¿ç”¨ä¸åŒçš„ä¾§è¾¹æ 
 */

const autoGetSidebarOptionBySrcDir = require('./AllPageSameSildeBar');

function autoGenSidebar(){
    let result = {};
    const contents = autoGetSidebarOptionBySrcDir();
    contents.forEach(element => {
   
        if(!(element.link in result)){
            result[element.link] = []
        }
   
        result[element.link].push({
            text: element.text,
            children: element.children
        })
    });

    return result;
}

// æµ‹è¯•
//console.log(JSON.stringify(autoGenSidebar()));
/**
{
    "/vuepress/":[
        {
            "text":"Vuepressåšå®¢æ­å»º",
            "children":[
                {
                    "text":"01 æ­å»ºvuepress2",
                    "link":"/vuepress/01 æ­å»ºvuepress2.md"
                },
                {
                    "text":"02 å›¾ç‰‡å­˜æ”¾è·¯å¾„",
                    "link":"/vuepress/02 å›¾ç‰‡å­˜æ”¾è·¯å¾„.md"
                },
                {
                    "text":"03 ä¾§è¾¹æ é…ç½®",
                    "link":"/vuepress/03 ä¾§è¾¹æ é…ç½®.md"
                }
            ]
        }
    ]
}
*/
 
 module.exports = autoGenSidebar;
```



### Titleç»´æŠ¤ğŸ˜

> `docs\.vuepress\autoSiderbar\textTitle.js`

```js
/**
 * æœ¬æ¥çš„æƒ³æ³•æ˜¯ä½¿ç”¨æ–‡ä»¶å¤¹çš„åç§°æ¥ä½œä¸ºsidebarçš„route
 * ä½†æ˜¯å‘ç°routeä¸èƒ½ä½¿ç”¨ä¸­æ–‡
 * æ‰€ä»¥å°†æ–‡ä»¶å¤¹çš„åç§°çš„ä½œä¸ºrouteçš„æƒ…å†µä¸‹,routeå¯¹åº”çš„textåˆ™åœ¨è¿™é‡Œç»´æŠ¤ä¸€ä»½
 * 
 * key: route
 * val: text
 */

const titles = {
    'vuepress': 'Vuepressåšå®¢æ­å»º'
};


module.exports = titles;
```



## é…ç½®

> é…ç½®è‡ªåŠ¨ç”Ÿæˆçš„ä¾§è¾¹æ 

```js
const autoGenSidebar = require('./autoSiderbar/DiffRouteDifSidebar')
const sidebar = autoGenSidebar();

module.exports = {
  lang: 'zh-CN',
  title: 'é™é»˜çš„Vlog',
  description: 'é™é»˜çš„Vuepress Blog',
  head: [['link', { rel: 'icon', href: '/images/favicon-32x32.png' }]], // iconè®¾ç½®

  themeConfig: {
    logo: '/images/logo.png',
    lastUpdated: false,   // ç¦ç”¨æ˜¾ç¤ºæ›´æ–°æ—¶é—´
    contributors: false,   // ç¦ç”¨æ˜¾ç¤ºè´¡çŒ®è€…
    sidebar
  },
}
```



## å‚è€ƒ

[é…ç½® | VuePress (vuejs.org)](https://v2.vuepress.vuejs.org/zh/reference/default-theme/config.html#sidebar)

