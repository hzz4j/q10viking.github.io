---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To ç›®å½•
  link: /java/
typora-root-url: ..\.vuepress\public
---



::: tip

æœ¬æ–‡ç« ä¸»è¦æ˜¯åŸºäºŽJava8çš„å¼€å‘åŒ…

:::

## æ—¶é—´åŸºç¡€çŸ¥è¯†ç§‘æ™®

### æ ¼æž—å¨æ²»æ—¶é—´

æ ¼æž—å¨æ²»ï¼ˆåˆè¯‘æ ¼æž—å°¼æ²»ï¼‰æ˜¯è‹±å›½ä¼¦æ•¦å—éƒŠåŽŸæ ¼æž—å¨æ²»å¤©æ–‡å°çš„æ‰€åœ¨åœ°ï¼Œå®ƒæ˜¯ä¸–ç•Œè®¡ç®—æ—¶é—´å’Œåœ°çƒç»åº¦çš„èµ·ç‚¹ï¼Œå›½é™…ç»åº¦ä¼šè®® 1884
å¹´åœ¨ç¾Žå›½åŽç››é¡¿å¬å¼€ï¼Œä¼šä¸Šé€šè¿‡åè®®ï¼Œä»¥ç»è¿‡æ ¼æž—å¨æ²»å¤©æ–‡å°çš„ç»çº¿ä¸ºé›¶åº¦ç»çº¿ï¼ˆå³æœ¬åˆå­åˆçº¿ï¼‰ï¼Œä½œä¸ºåœ°çƒç»åº¦çš„èµ·ç‚¹ï¼Œå¹¶ä»¥æ ¼æž—å¨æ²»ä¸ºâ€œä¸–ç•Œæ—¶åŒºâ€çš„èµ·ç‚¹ã€‚

### æ ¼æž—å¨æ²»æ—¶é—´å’ŒåŒ—äº¬æ—¶é—´çš„å…³ç³»

æ ¼æž—å¨æ²»æ—¶é—´è¢«å®šä¹‰ä¸ºä¸–ç•Œæ—¶é—´ï¼Œå°±æ˜¯ 0 æ—¶åŒºï¼ŒåŒ—äº¬æ˜¯ä¸œå…«åŒºã€‚ä¹Ÿå°±æ˜¯è¯´æ ¼æž—å¨æ²»æ—¶é—´çš„ 1 æ—¥ 0 ç‚¹ï¼Œå¯¹åº”åˆ°åŒ—äº¬çš„æ—¶é—´å°±æ˜¯ 1 æ—¥ 8 ç‚¹ã€‚

### æ—¶é—´æˆ³ðŸ’•

æ—¶é—´æˆ³æ˜¯æŒ‡æ ¼æž—å¨æ²»æ—¶é—´ `1970-01-01 00:00:00`ï¼ˆåŒ—äº¬æ—¶é—´ `1970-01-01 08:00:00`ï¼‰èµ·è‡³çŽ°åœ¨çš„æ€»ç§’æ•°ã€‚



## Java8ä¹‹å‰çš„æ—¶é—´æ“ä½œ

### æ—¶é—´

> åŒ…æ‹¬æ—¥æœŸå’Œæ—¶åˆ†ç§’

```java
import java.util.Calendar;
import java.util.Date;

public class DateDemo {
    public static void main(String[] args) {
        // æ–¹å¼1
        Date date = new Date();
        System.out.println(date);
        // æ–¹å¼2
        Calendar calendar = Calendar.getInstance();
        Date time = calendar.getTime();
        System.out.println(time);
    }
}
/**
 * Mon May 15 13:40:48 GMT+08:00 2023
 * Mon May 15 13:40:48 GMT+08:00 2023
 */
```

### æ—¶é—´æˆ³

```java
import java.util.Calendar;
import java.util.Date;

public class TimestampDemo {
    public static void main(String[] args) {
        long ts = new Date().getTime();
        System.out.println(ts);
        long ts2 = System.currentTimeMillis();
        System.out.println(ts2);
        long ts3 = Calendar.getInstance().getTimeInMillis();
        System.out.println(ts3);
        // java.sql.Dateéœ€è¦æ—¶é—´æˆ³ï¼Œè€ŒJava.util.Dateä¸éœ€è¦,ç›´æŽ¥è¿”å›žå½“å‰æ—¶é—´
        java.sql.Date date = new java.sql.Date(ts);
        System.out.println(date);
    }
}
/**
 * 1684130747115
 * 1684130747115
 * 1684130747122
 * 2023-05-15
 */
```



### java.util.Dateå’Œjava.sql.Date

- `java.util.Date`æœ‰æ— å‚æž„é€ å‚æ•°ï¼Œå®ƒä¼šè°ƒç”¨æœ‰å‚æž„é€ å‚æ•°ï¼Œä¼ å…¥çš„æ˜¯å½“å‰æ—¶é—´

  ```java
  public Date() {
      this(System.currentTimeMillis());
  }
  ```

- `java.sql.Date`æ²¡æœ‰æ— å‚æž„é€ å‚æ•°ï¼Œåªä¸€ä¸ªæœ‰å‚æž„é€ å‚æ•°ï¼Œéœ€è¦æ—¶é—´æˆ³ã€‚**é’ˆå¯¹SQLè¯­å¥ä½¿ç”¨çš„ï¼Œå®ƒåªåŒ…å«æ—¥æœŸè€Œæ²¡æœ‰æ—¶é—´éƒ¨åˆ†**

> å®ƒä»¬éƒ½æœ‰getTimeæ–¹æ³•è¿”å›žæ¯«ç§’æ•°

```java
public class SqlDateDemo {
    public static void main(String[] args) {
        java.util.Date utilDate = new java.util.Date();
        java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime());

        System.out.println(utilDate);
        System.out.println(sqlDate);
        System.out.println(utilDate.getTime() == sqlDate.getTime());
    }
}
/**
 * Mon May 15 14:13:33 GMT+08:00 2023
 * 2023-05-15
 * true
 */
```

> å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’è½¬åŒ–ï¼Œä¾èµ–çš„å°±æ˜¯æ—¶é—´æˆ³



### æ ¼å¼åŒ–SimpleDateFormatðŸ’•

```java
public class SimpleDateFormatDemo {
    public static void main(String[] args) throws ParseException {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Date date = new Date();
        String result = sdf.format(date);
        System.out.println(result);
        // ä»Žå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸ
        date = sdf.parse("2023-05-15 14:26:12");
        System.out.println(date);
    }
}
/**
 * 2023-05-15 14:27:40
 * Mon May 15 14:26:12 GMT+08:00 2023
 */
```


SimpleDateFormat æž„é€ å‚æ•°çš„å«ä¹‰ï¼Œè¯·å‚è€ƒä»¥ä¸‹è¡¨æ ¼ä¿¡æ¯ï¼š

| **å­—ç¬¦** | **å«ä¹‰**       | **ç¤ºä¾‹**  |
| -------- | -------------- | --------- |
| y        | å¹´             | yyyy-1996 |
| M        | æœˆ             | MM-07     |
| d        | æœˆä¸­çš„å¤©æ•°     | dd-02     |
| D        | å¹´ä¸­çš„å¤©æ•°     | 121       |
| E        | æ˜ŸæœŸå‡          | æ˜ŸæœŸå››    |
| H        | å°æ—¶æ•°ï¼ˆ0-23ï¼‰ | HH-23     |
| h        | å°æ—¶æ•°ï¼ˆ1-12ï¼‰ | hh-11     |
| m        | åˆ†é’Ÿæ•°         | mm-02     |
| s        | ç§’æ•°           | ss-03     |
| Z        | æ—¶åŒº           | +0800     |

ä½¿ç”¨ç¤ºä¾‹ï¼š

  * èŽ·å–æ˜ŸæœŸå‡ ï¼š`new SimpleDateFormat("E").format(new Date())`
  * èŽ·å–å½“å‰æ—¶åŒºï¼š`new SimpleDateFormat("Z").format(new Date())`

**æ³¨æ„äº‹é¡¹** ï¼š**åœ¨å¤šçº¿ç¨‹ä¸‹ SimpleDateFormat æ˜¯éžçº¿ç¨‹å®‰å…¨çš„**ï¼Œå› æ­¤åœ¨ä½¿ç”¨ SimpleDateFormatæ—¶è¦æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚åœ¨å¤šçº¿ç¨‹ä¸‹ï¼Œå¦‚æžœä½¿ç”¨ä¸å½“ï¼Œå¯èƒ½ä¼šé€ æˆç»“æžœä¸å¯¹æˆ–å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚



### æ—¶é—´è½¬åŒ–

> å­—ç¬¦ä¸²å’Œæ—¶é—´æˆ³è½¬Date
>
> **æ³¨æ„äº‹é¡¹** ï¼šå½“ä½¿ç”¨ SimpleDateFormat.parse() æ–¹æ³•è¿›è¡Œæ—¶é—´è½¬æ¢çš„æ—¶å€™ï¼ŒSimpleDateFormatçš„æž„é€ å‡½æ•°å¿…é¡»å’Œå¾…è½¬æ¢å­—ç¬¦ä¸²æ ¼å¼ä¸€è‡´ã€‚

```java
public class ChangeDateTimeDemo {
    public static void main(String[] args) throws ParseException {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        // ä»Žå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸ
        Date date1 = sdf.parse("2023-05-15 14:27:40");
        // ä»Žæ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²
        String result = sdf.format(date1);
        System.out.println(result);

        System.out.println("====================================");

        long timestamp = System.currentTimeMillis();
        System.out.println(timestamp);
        // ä»Žæ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¥æœŸ
        Date date2 = new Date(timestamp);
        System.out.println(sdf.format(date2));

        Timestamp timestamp2 = new Timestamp(timestamp);
        System.out.println(sdf.format(timestamp2));

    }
}
/**
 * 2023-05-15 14:27:40
 * ====================================
 * 1684132587075
 * 2023-05-15 14:36:27
 * 2023-05-15 14:36:27
 */
```



## Java8æ—¶é—´æ“ä½œ

JDK 8 å¯¹æ—¶é—´æ“ä½œæ–°å¢žäº†ä¸‰ä¸ªç±»ï¼šLocalDateTimeã€LocalDateã€LocalTimeã€‚

  * LocalDate åªåŒ…å«æ—¥æœŸï¼Œä¸åŒ…å«æ—¶é—´ï¼Œä¸å¯å˜ç±»ï¼Œä¸”çº¿ç¨‹å®‰å…¨ã€‚
  * LocalTime åªåŒ…å«æ—¶é—´ï¼Œä¸åŒ…å«æ—¥æœŸï¼Œä¸å¯å˜ç±»ï¼Œä¸”çº¿ç¨‹å®‰å…¨ã€‚
  * LocalDateTime æ—¢åŒ…å«äº†æ—¶é—´åˆåŒ…å«äº†æ—¥æœŸï¼Œä¸å¯å˜ç±»ï¼Œä¸”çº¿ç¨‹å®‰å…¨ã€‚

**çº¿ç¨‹å®‰å…¨æ€§**

å€¼å¾—ä¸€æçš„æ˜¯ JDK 8 ä¸­æ–°å¢žçš„è¿™ä¸‰ä¸ªæ—¶é—´ç›¸å…³çš„ç±»ï¼Œéƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æžå¤§åœ°é™ä½Žäº†å¤šçº¿ç¨‹ä¸‹ä»£ç å¼€å‘çš„é£Žé™©ã€‚

### æ—¶é—´

```java
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.LocalTime;

public class DateDemo {
    public static void main(String[] args) {
        // èŽ·å–æ—¥æœŸ
        LocalDate localDate = LocalDate.now();
        System.out.println(localDate);
        // èŽ·å–æ—¶é—´
        LocalTime localTime = LocalTime.now();
        System.out.println(localTime);
        // èŽ·å–æ—¥æœŸå’Œæ—¶é—´
        LocalDateTime localDateTime = LocalDateTime.now();
        System.out.println(localDateTime);
    }
}
/**
 * 2023-05-15
 * 15:02:20.216
 * 2023-05-15T15:02:20.217
 */
```

### æ—¶é—´æˆ³

> èŽ·å–å½“å‰æ—¶é—´æˆ³

```java
import java.time.Instant;
public class TimestampDemo {
    public static void main(String[] args) {
        long epochMilli = Instant.now().toEpochMilli();
        long epochSecond = Instant.now().getEpochSecond();
        System.out.println(System.currentTimeMillis());
        System.out.println(epochMilli);
        System.out.println(epochSecond);

    }
}
/**
 * 1684134564173
 * 1684134564173
 * 1684134564
 */
```



### æ ¼å¼åŒ–DateTimeFormatterðŸ’•

```java
public class DateTimeFormatterDemo {
    public static void main(String[] args) {
        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
        String timeFormat = dateTimeFormatter.format(LocalDateTime.now());
        System.out.println(timeFormat);

        LocalDateTime localDateTime = LocalDateTime.parse("2021-05-15 15:02:20", dateTimeFormatter);
        System.out.println(localDateTime);
    }
}
/**
 * 2023-05-15 15:45:21
 * 2021-05-15T15:02:20
 */
```



## è½¬æ¢

### LocalDateå’ŒLocalDateTimeè½¬æ¢ä¸ºæ—¶é—´æˆ³

```java
import java.sql.Timestamp;
import java.time.LocalDate;
import java.time.LocalDateTime;

public class ChangeLocalDateToTimestamp {
    public static void main(String[] args) {
        LocalDate localDate = LocalDate.now();
       // LocalDateTime localDateTime = LocalDateTime.now();
        LocalDateTime localDateTime = localDate.atStartOfDay();

        // LocalDateè½¬æ¢ä¸ºæ—¶é—´æˆ³
        long timestamp1 = localDate.atStartOfDay().toInstant(java.time.ZoneOffset.ofHours(8)).toEpochMilli();
        long timestamp2 = Timestamp.valueOf(localDateTime).getTime(); // æŽ¥æ”¶çš„æ˜¯ä¸€ä¸ªLocalDateTimeç±»åž‹
        
        System.out.println(timestamp1);
        System.out.println(timestamp2);
        System.out.println(timestamp1 == timestamp2);
    }
}
/**
 * 1684080000000
 * 1684080000000
 * true
 */
```



### æ—¶é—´æˆ³è½¬æ¢ä¸ºLocalDateå’ŒLocalDateTime

```java
public class TimeStampToLocalDateDemo {
    public static void main(String[] args) {

        LocalDateTime localDateTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(Long.parseLong("1684080000000")),
                ZoneId.systemDefault());
        LocalDate localDate = localDateTime.toLocalDate();

        System.out.println(localDate);
        System.out.println(localDateTime);
    }
}
/**
 * 2023-05-15
 * 2023-05-15T00:00
 */
```



### LocalDateå’ŒLocalDateTimeç›¸äº’è½¬æ¢

```java
public class LocalDateVSLocalDateTimeDemo {
    public static void main(String[] args) {
        LocalDate localDate = LocalDate.now();
        // LocalDate -> LocalDateTime
        LocalDateTime localDateTime = localDate.atStartOfDay();

        // LocalDateTime -> LocalDate
        localDate = localDateTime.toLocalDate();
    }
}
```



### Dateä¸ŽLocalDateè½¬æ¢

> å¯ä»¥é€šè¿‡æ—¶é—´æˆ³è”ç³»èµ·æ¥
>
> LocalDateè½¬Date

```java
public class DateVsLocalDate {
    public static void main(String[] args) {
        LocalDate localDate = LocalDate.now();
        Date date = new Date(
                localDate.getYear() - 1900,
                localDate.getMonthValue() - 1,
                localDate.getDayOfMonth()
        );

        // é€šè¿‡æ—¶é—´æˆ³
        Date date1 = new Date(Timestamp.valueOf(localDate.atStartOfDay()).getTime());

        System.out.println(date);
        System.out.println(date1);
    }
}
/**
 * Mon May 15 00:00:00 GMT+08:00 2023
 * Mon May 15 00:00:00 GMT+08:00 2023
 */
```



> Dateè½¬LocalDate

```java
public class DateToLocalDateDemo {
    public static void main(String[] args) {
        Date date = new Date();
        LocalDateTime localDateTime = LocalDateTime.ofInstant(
                Instant.ofEpochMilli(date.getTime()),
                ZoneId.systemDefault());
        LocalDate localDate = localDateTime.toLocalDate();

        System.out.println(date);
        System.out.println(localDateTime);
        System.out.println(localDate);
    }
}
/**
 * Mon May 15 15:40:28 GMT+08:00 2023
 * 2023-05-15T15:40:28.510
 * 2023-05-15
 */
```

