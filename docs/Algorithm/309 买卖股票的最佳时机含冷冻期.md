---
sidebarDepth: 3
sidebar: auto
prev:
  text: Back To ç›®å½•
  link: /Algorithm/
typora-root-url: ..\.vuepress\public
---

::: tip

[309. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/)

:::



## åŠ¨æ€è§„åˆ’

1. ä¸€ä¸ªé˜¶æ®µæœ‰å¤šç§çŠ¶æ€
2. å¹¶ä¸”éœ€è¦æ¢³ç†ä¸Šä¸€ä¸ªé˜¶æ®µä¼šå¯ä»¥åˆ°ä¸‹ä¸€ä¸ªä»€ä¹ˆé˜¶æ®µ

![image-20230917230002757](/images/algorithm/image-20230917230002757.png)

```java
// 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰ -> 0 å–å‡º/ä¸æŒæœ‰
dp[i][0] = dp[i-1][2] + prices[i];
// 1 æœªåŠ¨ä½œ/æœªæŒæœ‰ -> 1 æœªåŠ¨ä½œ/æœªæŒæœ‰
// 3 å†·å†»æœŸ/æœªæŒæœ‰ -> 1 æœªåŠ¨ä½œ/æœªæŒæœ‰
dp[i][1] = Math.max(dp[i-1][1],dp[i-1][3]);
// 1 æœªåŠ¨ä½œ/æœªæŒæœ‰ -> 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰
// 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰ -> 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰
// 3 å†·å†»æœŸ/æœªæŒæœ‰ -> 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰ ğŸŒŸæ³¨æ„ï¼ˆæ›¾ç»ï¼‰ä¹°å…¥/æŒæœ‰ -> æœªåŠ¨ä½œï¼Œåˆ†ä¸ºå½“å‰æœªåŠ¨ä½œï¼Œè€Œä¸æ˜¯æœªæŒæœ‰çš„æœªåŠ¨ä½œ
dp[i][2] = Math.max(dp[i-1][1]-prices[i],Math.max(dp[i-1][2],dp[i-1][3]-prices[i]));
// 0 å–å‡º/ä¸æŒæœ‰ -> 3 å†·å†»æœŸ/æœªæŒæœ‰
dp[i][3] = dp[i-1][0];
```



```java
public class Solution {
    public static void main(String[] args) {
        Solution solution = new Solution();
        System.out.println(solution.maxProfit(new int[]{
            1,2,3,0,2
        }));
    }

    public int maxProfit(int[] prices) {
        int length = prices.length;
        // 0 å–å‡º/ä¸æŒæœ‰  1 æœªåŠ¨ä½œ/æœªæŒæœ‰  2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰ 3 å†·å†»æœŸ/æœªæŒæœ‰
        int[][] dp = new int[length][4];
        dp[0][2] = -prices[0];
        for (int i = 1; i < length; i++) {
            // 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰ -> 0 å–å‡º/ä¸æŒæœ‰
            dp[i][0] = dp[i-1][2] + prices[i];
            // 1 æœªåŠ¨ä½œ/æœªæŒæœ‰ -> 1 æœªåŠ¨ä½œ/æœªæŒæœ‰
            // 3 å†·å†»æœŸ/æœªæŒæœ‰ -> 1 æœªåŠ¨ä½œ/æœªæŒæœ‰
            dp[i][1] = Math.max(dp[i-1][1],dp[i-1][3]);
            // 1 æœªåŠ¨ä½œ/æœªæŒæœ‰ -> 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰
            // 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰ -> 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰
            // 3 å†·å†»æœŸ/æœªæŒæœ‰ -> 2 ï¼ˆæ›¾ç»ä¹°å…¥ï¼‰/æŒæœ‰
            dp[i][2] = Math.max(dp[i-1][1]-prices[i],Math.max(dp[i-1][2],dp[i-1][3]-prices[i]));
            // 0 å–å‡º/ä¸æŒæœ‰ -> 3 å†·å†»æœŸ/æœªæŒæœ‰
            dp[i][3] = dp[i-1][0];
        }

        return Math.max(dp[length-1][0],Math.max(dp[length-1][1],dp[length-1][3]));
    }
}
// 3
```

