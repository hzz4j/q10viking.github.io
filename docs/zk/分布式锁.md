## 分布式锁

> 加锁的本质： 保证多线程竞争共享资源时的序列化执行。

用来解决跨机器进程之间的数据同步问题。

redis适用高并发大的场景

zk适合高可靠的，并发量不是很大的场景



## 数据库实现的分布式锁

mysql如果宕机后，如果客户端单机，没有即使删除锁，会导致锁始终没有释放



## ZK用作分布式锁

临时节点： 避免锁一直存在

通知：唤醒线程（能够有效的控制时间），不会出现锁续命的场景

为了避免羊群效应，创建临时顺序节点

```
create -e -s /lock/prefixName
```

缺点： **需要频繁创建和删除节点，性能上不如Redis**

### Curator实现了可重入锁的逻辑