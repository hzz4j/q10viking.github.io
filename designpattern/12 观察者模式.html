<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/images/favicon-32x32.png"><title>é™é»˜ã®Blog</title><meta name="description" content="é™é»˜çš„Vuepress Blog">
    <link rel="preload" href="/assets/js/runtime~app.2c87fbe0.js" as="script"><link rel="preload" href="/assets/css/styles.b779b927.css" as="style"><link rel="preload" href="/assets/js/95615.aba5921d.js" as="script"><link rel="preload" href="/assets/js/app.4aafd1f6.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.b779b927.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">é™é»˜ã®Blog</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/topicNav/" class="nav-link" aria-label="ğŸ“—Menu"><!--[--><!--]--> ğŸ“—Menu <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/aboutme/" class="nav-link" aria-label="AboutMe"><!--[--><!--]--> AboutMe <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Q10Viking/q10viking.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/topicNav/" class="nav-link" aria-label="ğŸ“—Menu"><!--[--><!--]--> ğŸ“—Menu <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/aboutme/" class="nav-link" aria-label="AboutMe"><!--[--><!--]--> AboutMe <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Q10Viking/q10viking.github.io" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item"></p><ul class=""><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#æ¨¡å¼å®šä¹‰" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æ¨¡å¼å®šä¹‰"><!--[--><!--]--> æ¨¡å¼å®šä¹‰ <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#å¯¹è±¡çš„è”åŠ¨" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="å¯¹è±¡çš„è”åŠ¨"><!--[--><!--]--> å¯¹è±¡çš„è”åŠ¨ <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#å¼€å‘ä¼˜ç‚¹" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="å¼€å‘ä¼˜ç‚¹"><!--[--><!--]--> å¼€å‘ä¼˜ç‚¹ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#åŸºæœ¬æ¨¡å‹" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="åŸºæœ¬æ¨¡å‹"><!--[--><!--]--> åŸºæœ¬æ¨¡å‹ <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#åŸºæœ¬æ¨¡å‹1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="åŸºæœ¬æ¨¡å‹1"><!--[--><!--]--> åŸºæœ¬æ¨¡å‹1 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#åŸºæœ¬æ¨¡å‹2" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="åŸºæœ¬æ¨¡å‹2"><!--[--><!--]--> åŸºæœ¬æ¨¡å‹2 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#åº”ç”¨åœºæ™¯" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="åº”ç”¨åœºæ™¯"><!--[--><!--]--> åº”ç”¨åœºæ™¯ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#æºç åº”ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æºç åº”ç”¨"><!--[--><!--]--> æºç åº”ç”¨ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#æ¡ˆä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æ¡ˆä¾‹"><!--[--><!--]--> æ¡ˆä¾‹ <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ"><!--[--><!--]--> å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#rrsæ¶ˆæ¯è®¢é˜…" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="RRSæ¶ˆæ¯è®¢é˜…"><!--[--><!--]--> RRSæ¶ˆæ¯è®¢é˜… <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/designpattern/12%20%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html#è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…çš„ç†è§£" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…çš„ç†è§£"><!--[--><!--]--> è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…çš„ç†è§£ <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="æ¨¡å¼å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#æ¨¡å¼å®šä¹‰" aria-hidden="true">#</a> æ¨¡å¼å®šä¹‰</h2><p>è§‚å¯Ÿè€…æ¨¡å¼ä¹Ÿå«åšå‘å¸ƒ/è®¢é˜…æ¨¡å‹ï¼ˆPublish/Subscribeï¼‰</p><blockquote><p>å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„<strong>ä¸€å¯¹å¤šä¾èµ–</strong>ï¼Œè®©<strong>å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡</strong>ï¼Œ<strong>å½“ä¸»é¢˜å¯¹è±¡å‘ç”Ÿå˜åŒ–</strong>æ—¶ï¼Œå®ƒçš„<strong>æ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶æ›´æ–°</strong></p></blockquote><h3 id="å¯¹è±¡çš„è”åŠ¨" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡çš„è”åŠ¨" aria-hidden="true">#</a> å¯¹è±¡çš„è”åŠ¨</h3><p><img src="/images/designpattern/image-20240327153550482.png" alt="image-20240327153550482"></p><hr><h2 id="å¼€å‘ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#å¼€å‘ä¼˜ç‚¹" aria-hidden="true">#</a> å¼€å‘ä¼˜ç‚¹</h2><ol><li>ç¬¦åˆå¼€é—­åŸåˆ™</li><li>å¯ä»¥åœ¨<strong>è¿è¡Œæ—¶å»ºç«‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»</strong></li></ol><h2 id="åŸºæœ¬æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¨¡å‹" aria-hidden="true">#</a> åŸºæœ¬æ¨¡å‹</h2><h3 id="åŸºæœ¬æ¨¡å‹1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¨¡å‹1" aria-hidden="true">#</a> åŸºæœ¬æ¨¡å‹1</h3><p><a href="https://gitee.com/q10viking/design-patterns/tree/master/springboot-design-patterns/src/main/java/org/hzz/%E8%A1%8C%E4%B8%BA%E6%80%A7%E6%A8%A1%E5%BC%8F/BP1_%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/%E5%9F%BA%E6%9C%AC%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener noreferrer">Source Code<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p><img src="/images/designpattern/image-20240327154307815.png" alt="image-20240327154307815"></p><ul><li>Subjectï¼ˆç›®æ ‡ï¼‰ï¼šç›®æ ‡åˆç§°ä¸ºä¸»é¢˜ï¼Œå®ƒæ˜¯æŒ‡è¢«è§‚å¯Ÿçš„å¯¹è±¡ã€‚åœ¨ç›®æ ‡ä¸­å®šä¹‰äº†ä¸€ä¸ªè§‚å¯Ÿè€…é›†åˆï¼Œä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„è§‚å¯Ÿè€…æ¥è§‚å¯Ÿï¼Œå®ƒæä¾›ä¸€ç³»åˆ—æ–¹æ³•æ¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ï¼ŒåŒæ—¶å®šä¹‰äº†é€šçŸ¥æ–¹æ³•notifyï¼ˆï¼‰ã€‚ç›®æ ‡ç±»å¯ä»¥æ˜¯æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–å…·ä½“ç±»ã€‚(æœ‰ç‚¹ç±»ä¼¼æ³¨å†Œä¸­å¿ƒçš„æ„æ€)</li><li>ConcreteSubjectï¼ˆå…·ä½“ç›®æ ‡ï¼‰ï¼šå…·ä½“ç›®æ ‡æ˜¯ç›®æ ‡ç±»çš„å­ç±»ï¼Œé€šå¸¸åŒ…å«æœ‰ç»å¸¸å‘ç”Ÿæ”¹å˜çš„æ•°æ®ã€‚å½“å®ƒçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå‘å…¶å„ä¸ªè§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚åŒæ—¶å®ƒè¿˜å®ç°äº†åœ¨ç›®æ ‡ç±»ä¸­å®šä¹‰çš„æŠ½è±¡ä¸šåŠ¡é€»è¾‘æ–¹æ³•ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚å¦‚æœæ— é¡»æ‰©å±•ç›®æ ‡ç±»ï¼Œåˆ™å…·ä½“ç›®æ ‡ç±»å¯ä»¥çœç•¥</li><li>ConcreteSubjectï¼ˆå…·ä½“ç›®æ ‡ï¼‰ï¼šå…·ä½“ç›®æ ‡æ˜¯ç›®æ ‡ç±»çš„å­ç±»ï¼Œé€šå¸¸åŒ…å«æœ‰ç»å¸¸å‘ç”Ÿæ”¹å˜çš„æ•°æ®ã€‚å½“å®ƒçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå‘å…¶å„ä¸ªè§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚åŒæ—¶å®ƒè¿˜å®ç°äº†åœ¨ç›®æ ‡ç±»ä¸­å®šä¹‰çš„æŠ½è±¡ä¸šåŠ¡é€»è¾‘æ–¹æ³•ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚å¦‚æœæ— é¡»æ‰©å±•ç›®æ ‡ç±»ï¼Œåˆ™å…·ä½“ç›®æ ‡ç±»å¯ä»¥çœç•¥</li><li>ConcreteObserverï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰ï¼šåœ¨å…·ä½“è§‚å¯Ÿè€…ä¸­ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘å…·ä½“ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒå­˜å‚¨å…·ä½“è§‚å¯Ÿè€…çš„æœ‰å…³çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€éœ€è¦å’Œå…·ä½“ç›®æ ‡çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚å®ƒå®ç°äº†åœ¨æŠ½è±¡è§‚å¯Ÿè€…Observerä¸­å£°æ˜çš„updateï¼ˆï¼‰æ–¹æ³•ã€‚é€šå¸¸åœ¨å®ç°æ—¶ï¼Œå¯ä»¥è°ƒç”¨å…·ä½“ç›®æ ‡ç±»çš„attachï¼ˆï¼‰æ–¹æ³•å°†è‡ªå·±æ·»åŠ åˆ°ç›®æ ‡ç±»çš„é›†åˆä¸­æˆ–é€šè¿‡detachï¼ˆï¼‰æ–¹æ³•å°†è‡ªå·±ä»ç›®æ ‡ç±»çš„é›†åˆä¸­åˆ é™¤ã€‚</li></ul><h4 id="subject" tabindex="-1"><a class="header-anchor" href="#subject" aria-hidden="true">#</a> subject</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ç›®æ ‡ä¸»é¢˜æŠ½è±¡ç±»
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®šä¹‰ä¸€ä¸ªè§‚å¯Ÿè€…é›†åˆç”¨äºå­˜å‚¨æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡</span>
    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ³¨å†Œæ–¹æ³•ï¼Œç”¨äºå‘è§‚å¯Ÿè€…é›†åˆä¸­æ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">{</span>
        observers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æ³¨é”€æ–¹æ³•,ç”¨äºåœ¨è§‚å¯Ÿè€…é›†åˆä¸­åˆ é™¤æŒ‡å®šçš„è§‚å¯Ÿè€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">{</span>
        observers<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å£°æ˜æŠ½è±¡é€šçŸ¥æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">notifyAllObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>åŸºæœ¬æ¨¡å‹<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>åŸºæœ¬æ¨¡å‹<span class="token punctuation">.</span>Observer<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>åŸºæœ¬æ¨¡å‹<span class="token punctuation">.</span>Subject<span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ThreadPoolExecutor</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteSubject</span> <span class="token keyword">extends</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token class-name">ThreadPoolExecutor</span> executor <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">)</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å®ç°é€šçŸ¥æ–¹æ³•</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyAllObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// éå†è§‚å¯Ÿè€…é›†åˆï¼Œè°ƒç”¨æ¯ä¸€ä¸ªè§‚å¯Ÿè€…çš„åƒä¸€ä¸ªå“åº”æ–¹æ³•</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">)</span><span class="token punctuation">{</span>
            executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span> observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸šåŠ¡å˜åŠ¨ï¼Œé€šçŸ¥å„ä¸ªè§‚å¯Ÿè€…&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyAllObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="observer" tabindex="-1"><a class="header-anchor" href="#observer" aria-hidden="true">#</a> observer</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// å“åº”å£°æ˜æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteObserver</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å®ç°å“åº”æ–¹æ³•</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å…·ä½“å“åº”ä»£ç </span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&quot;æ”¶åˆ°é€šçŸ¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•" aria-hidden="true">#</a> æµ‹è¯•</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token string">&quot;broker-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token string">&quot;broker-2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token string">&quot;broker-3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ConcreteSubject</span><span class="token punctuation">)</span>subject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * ä¸šåŠ¡å˜åŠ¨ï¼Œé€šçŸ¥å„ä¸ªè§‚å¯Ÿè€…
 * broker-2æ”¶åˆ°é€šçŸ¥
 * broker-3æ”¶åˆ°é€šçŸ¥
 * broker-1æ”¶åˆ°é€šçŸ¥
 */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="åŸºæœ¬æ¨¡å‹2" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¨¡å‹2" aria-hidden="true">#</a> åŸºæœ¬æ¨¡å‹2</h3><p><img src="/images/designpattern/image-20210330234215870.png" alt="image-20210330234215870"></p><p><a href="https://github.com/Q10Viking/learncode/tree/main/designpattern/src/org/hzz/observer" target="_blank" rel="noopener noreferrer">Source Code<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// è§‚å¯Ÿè€…</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ObServer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Object</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä¸»é¢˜</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">ObServer</span> obServer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">ObServer</span> obServer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">notifyAllObServer</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// è®¢é˜…è€…å®ç°</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token keyword">implements</span> <span class="token class-name">ObServer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;Task1&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Object</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s receive %s\n&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä¸»é¢˜å®ç°</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubjectImp</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ObServer</span><span class="token punctuation">&gt;</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">ObServer</span> obServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        container<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obServer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">ObServer</span> obServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        container<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>obServer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyAllObServer</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ObServer</span> observer<span class="token operator">:</span>
             container<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="æµ‹è¯•-1" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-1" aria-hidden="true">#</a> æµ‹è¯•</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMain</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubjectImp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObServer</span> task1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;Task1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObServer</span> task2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;Task2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>task1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>task2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">notifyAllObServer</span><span class="token punctuation">(</span><span class="token string">&quot;A happed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>task2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        subject<span class="token punctuation">.</span><span class="token function">notifyAllObServer</span><span class="token punctuation">(</span><span class="token string">&quot;A happed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * Task1 receive A happed
 * Task2 receive A happed
 * --------------------------------------------
 * Task1 receive A happed
 */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><hr><h2 id="åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> åº”ç”¨åœºæ™¯</h2><p>å½“<strong>æ›´æ”¹ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å¯èƒ½éœ€è¦æ›´æ”¹å…¶ä»–å¯¹è±¡</strong>ï¼Œå¹¶ä¸”å®é™…çš„<strong>å¯¹è±¡é›†äº‹å…ˆæœªçŸ¥æˆ–åŠ¨æ€æ›´æ”¹</strong>æ—¶ï¼Œè¯·ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼</p><h2 id="æºç åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#æºç åº”ç”¨" aria-hidden="true">#</a> æºç åº”ç”¨</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Spring</span><span class="token operator">:</span>
<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span>ApplicationListener</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h2><h3 id="å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ" tabindex="-1"><a class="header-anchor" href="#å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ" aria-hidden="true">#</a> å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ</h3><p><a href="https://gitee.com/q10viking/design-patterns/tree/master/springboot-design-patterns/src/main/java/org/hzz/%E8%A1%8C%E4%B8%BA%E6%80%A7%E6%A8%A1%E5%BC%8F/BP1_%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/%E6%A1%88%E4%BE%8B/%E5%A4%9A%E4%BA%BA%E8%81%94%E6%9C%BA%E5%AF%B9%E6%88%98%E6%B8%B8%E6%88%8F" target="_blank" rel="noopener noreferrer">Source Code<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>è”ç›Ÿæˆå‘˜å—åˆ°æ”»å‡»â†’å‘é€é€šçŸ¥ç»™ç›Ÿå‹â†’ç›Ÿå‹åšå‡ºå“åº”ã€‚</p><p><img src="/images/designpattern/image-20240327153550482.png" alt="image-20240327153550482"></p><p><img src="/images/designpattern/image-20240327170525513.png" alt="image-20240327170525513"></p><p>AllyControlCenterå……å½“ç›®æ ‡ç±»ï¼ŒConcreteAllyControlCenterå……å½“å…·ä½“ç›®æ ‡ç±»ï¼ŒObserverå……å½“æŠ½è±¡è§‚å¯Ÿè€…ï¼ŒPlayerå……å½“å…·ä½“è§‚å¯Ÿè€…</p><h4 id="æ§åˆ¶ä¸­å¿ƒ-ä¸»é¢˜" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶ä¸­å¿ƒ-ä¸»é¢˜" aria-hidden="true">#</a> æ§åˆ¶ä¸­å¿ƒï¼ˆä¸»é¢˜ï¼‰</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»ï¼šç›®æ ‡ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AllyControlCenter</span> <span class="token punctuation">{</span>
    <span class="token comment">//æˆ˜é˜Ÿåç§°</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> allyName<span class="token punctuation">;</span>
    <span class="token comment">//å®šä¹‰ä¸€ä¸ªé›†åˆç”¨äºå­˜å‚¨æˆ˜é˜Ÿæˆå‘˜</span>
    <span class="token keyword">protected</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span> players <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAllyName</span><span class="token punctuation">(</span><span class="token class-name">String</span> allyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>allyName <span class="token operator">=</span> allyName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAllyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allyName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ³¨å†Œæ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> obs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obs<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;åŠ å…¥&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allyName <span class="token operator">+</span> <span class="token string">&quot;æˆ˜é˜Ÿï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        players<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ³¨é”€æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">quit</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> obs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obs<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;é€€å‡º&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allyName <span class="token operator">+</span> <span class="token string">&quot;æˆ˜é˜Ÿï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        players<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å£°æ˜æŠ½è±¡é€šçŸ¥æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">notifyObserver</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>å…·ä½“å®ç°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>AllyControlCenter<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>Observer<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ThreadPoolExecutor</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteAllyControlCenter</span> <span class="token keyword">extends</span> <span class="token class-name">AllyControlCenter</span> <span class="token punctuation">{</span>
    <span class="token class-name">ThreadPoolExecutor</span> executor <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">)</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">ConcreteAllyControlCenter</span><span class="token punctuation">(</span><span class="token class-name">String</span> allyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>allyName <span class="token operator">+</span> <span class="token string">&quot;æˆ˜é˜Ÿç»„å»ºæˆåŠŸï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>allyName <span class="token operator">=</span> allyName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObserver</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>allyName <span class="token operator">+</span> <span class="token string">&quot;æˆ˜é˜Ÿç´§æ€¥é€šçŸ¥ï¼Œç›Ÿå‹&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;é­å—æ•Œäººæ”»å‡»ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//éå†è§‚å¯Ÿè€…é›†åˆï¼Œè°ƒç”¨æ¯ä¸€ä¸ªç›Ÿå‹ï¼ˆè‡ªå·±é™¤å¤–ï¼‰çš„æ”¯æ´æ–¹æ³•</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> obs <span class="token operator">:</span> players<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obs<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// ä½¿ç”¨å¤šçº¿ç¨‹æé«˜å¹¶å‘</span>
               executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span> obs<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="ç©å®¶-è§‚å¯Ÿè€…" tabindex="-1"><a class="header-anchor" href="#ç©å®¶-è§‚å¯Ÿè€…" aria-hidden="true">#</a> ç©å®¶ï¼ˆè§‚å¯Ÿè€…ï¼‰</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡è§‚å¯Ÿç±»</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å£°æ˜æ”¯æ´ç›Ÿå‹æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beAttacked</span><span class="token punctuation">(</span><span class="token class-name">AllyControlCenter</span> acc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å£°æ˜é­å—æ”»å‡»æ–¹æ³•</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å…·ä½“å®ç°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>AllyControlCenter<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>Observer<span class="token punctuation">;</span>

<span class="token comment">//æˆ˜é˜Ÿæˆå‘˜ç±»ï¼šå…·ä½“è§‚å¯Ÿè€…ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ”¯æ´ç›Ÿå‹æ–¹æ³•çš„å®ç°</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åšæŒä½ï¼Œ&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;æ¥æ•‘ä½ ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//é­å—æ”»å‡»æ–¹æ³•çš„å®ç°ï¼Œå½“é­å—æ”»å‡»æ—¶å°†è°ƒç”¨æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»çš„é€šçŸ¥æ–¹æ³•notifyObserver()æ¥é€šçŸ¥ç›Ÿå‹</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beAttacked</span><span class="token punctuation">(</span><span class="token class-name">AllyControlCenter</span> acc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;è¢«æ”»å‡»ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        acc<span class="token punctuation">.</span><span class="token function">notifyObserver</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="æµ‹è¯•-2" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-2" aria-hidden="true">#</a> æµ‹è¯•</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>ConcreteAllyControlCenter<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>å¤šäººè”æœºå¯¹æˆ˜æ¸¸æˆ<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>Player<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å®šä¹‰è§‚å¯Ÿç›®æ ‡å¯¹è±¡</span>
        <span class="token class-name">AllyControlCenter</span> acc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteAllyControlCenter</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹è€…è£è€€çº¢æ–¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å®šä¹‰å››ä¸ªè§‚å¯Ÿè€…å¯¹è±¡</span>
        <span class="token class-name">Observer</span> player1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">&quot;å¯¹æŠ—è·¯-ç‹‚é“&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Observer</span> player2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">&quot;è¾…åŠ©-è”¡æ–‡å§¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Observer</span> player3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸­è·¯-å¥³å¨²&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Observer</span> player4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“é‡-äº‘ä¸­å›&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Observer</span> player5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">&quot;å°„æ‰‹-ä¼½ç½—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        acc<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>player1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        acc<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>player2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        acc<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>player3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        acc<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>player4<span class="token punctuation">)</span><span class="token punctuation">;</span>
        acc<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>player5<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//æŸæˆå‘˜é­å—æ”»å‡»</span>
        player1<span class="token punctuation">.</span><span class="token function">beAttacked</span><span class="token punctuation">(</span>acc<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * ç‹è€…è£è€€çº¢æ–¹æˆ˜é˜Ÿç»„å»ºæˆåŠŸï¼
 * ----------------------------
 * å¯¹æŠ—è·¯-ç‹‚é“åŠ å…¥ç‹è€…è£è€€çº¢æ–¹æˆ˜é˜Ÿï¼
 * è¾…åŠ©-è”¡æ–‡å§¬åŠ å…¥ç‹è€…è£è€€çº¢æ–¹æˆ˜é˜Ÿï¼
 * ä¸­è·¯-å¥³å¨²åŠ å…¥ç‹è€…è£è€€çº¢æ–¹æˆ˜é˜Ÿï¼
 * æ‰“é‡-äº‘ä¸­å›åŠ å…¥ç‹è€…è£è€€çº¢æ–¹æˆ˜é˜Ÿï¼
 * å°„æ‰‹-ä¼½ç½—åŠ å…¥ç‹è€…è£è€€çº¢æ–¹æˆ˜é˜Ÿï¼
 * å¯¹æŠ—è·¯-ç‹‚é“è¢«æ”»å‡»ï¼
 * ç‹è€…è£è€€çº¢æ–¹æˆ˜é˜Ÿç´§æ€¥é€šçŸ¥ï¼Œç›Ÿå‹å¯¹æŠ—è·¯-ç‹‚é“é­å—æ•Œäººæ”»å‡»ï¼
 * åšæŒä½ï¼Œè¾…åŠ©-è”¡æ–‡å§¬æ¥æ•‘ä½ ï¼
 * åšæŒä½ï¼Œæ‰“é‡-äº‘ä¸­å›æ¥æ•‘ä½ ï¼
 * åšæŒä½ï¼Œä¸­è·¯-å¥³å¨²æ¥æ•‘ä½ ï¼
 * åšæŒä½ï¼Œå°„æ‰‹-ä¼½ç½—æ¥æ•‘ä½ ï¼
 */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="rrsæ¶ˆæ¯è®¢é˜…" tabindex="-1"><a class="header-anchor" href="#rrsæ¶ˆæ¯è®¢é˜…" aria-hidden="true">#</a> RRSæ¶ˆæ¯è®¢é˜…</h3><p><a href="https://gitee.com/q10viking/design-patterns/tree/master/springboot-design-patterns/src/main/java/org/hzz/%E8%A1%8C%E4%B8%BA%E6%80%A7%E6%A8%A1%E5%BC%8F/BP1_%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/%E6%A1%88%E4%BE%8B/RRS%E6%B6%88%E6%81%AF%E8%AE%A2%E9%98%85" target="_blank" rel="noopener noreferrer">Source Code<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h4 id="ä¸»é¢˜ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#ä¸»é¢˜ä¸­å¿ƒ" aria-hidden="true">#</a> ä¸»é¢˜ä¸­å¿ƒ</h4><p>å®šä¹‰ä¸€ç³»åˆ—æ“ä½œè¡Œä¸º</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æ¶ˆæ¯è®¢é˜…è€…æ“ä½œæ¥å£
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IRsserOperate</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¢åŠ ä¸€ä¸ªè®¢é˜…è€…</span>
    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">IRss</span> rss<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ç§»é™¤ä¸€ä¸ªè®¢é˜…è€…</span>
    <span class="token keyword">void</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token class-name">IRss</span> rss<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ ¹æ®è®¢é˜…è€…çš„IDç§»é™¤ä¸€ä¸ªè®¢é˜…è€…</span>
    <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Long</span> rssID<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ï¼Œè®¢é˜…çš„å†…å®¹æ˜¯ä»€ä¹ˆ</span>
    <span class="token keyword">void</span> <span class="token function">notifyRssers</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å‘å¸ƒæ¶ˆæ¯</span>
    <span class="token keyword">void</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>æŠ½è±¡ä¸»é¢˜ç±»</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æŠ½è±¡ä¸€ä¸ªè®¢é˜…ç±»ï¼Œå®ç°rssæ“ä½œ
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractSubscription</span> <span class="token keyword">implements</span> <span class="token class-name">IRsserOperate</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * å­˜æ”¾ä¸åŒçš„æ¶ˆæ¯è®¢é˜…å¯¹è±¡ï¼ˆä¸€ä¸ªæ¶ˆæ¯è®¢é˜…å¯¹è±¡å¯¹åº”ä¸€ä¸ªæ¶ˆæ¯æ¶ˆè´¹è€…ï¼‰
     */</span>
    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IRss</span><span class="token punctuation">&gt;</span></span> rsses <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">IRss</span> rss<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rsses<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rss<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token class-name">IRss</span> rss<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rsses<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>rss<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * ç§»é™¤æ¶ˆæ¯è®¢é˜…æ–¹
     *
     * <span class="token keyword">@param</span> <span class="token parameter">rssId</span> æ¶ˆæ¯è®¢é˜…æ¶ˆè´¹è€…ID
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Long</span> rssId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IRss</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> rsses<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">RssUser</span> next <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RssUser</span><span class="token punctuation">)</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rssId<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                iterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å°†æ¶ˆæ¯é€šçŸ¥åˆ°æ‰€æœ‰çš„è®¢é˜…è€…
     *
     * <span class="token keyword">@param</span> <span class="token parameter">content</span> æ¶ˆæ¯å†…å®¹
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyRssers</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">IRss</span> rss <span class="token operator">:</span> rsses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¾ªç¯è°ƒç”¨</span>
            rss<span class="token punctuation">.</span><span class="token function">rss</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>å…·ä½“å®ç°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span><span class="token constant">RRS</span>æ¶ˆæ¯è®¢é˜…<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span><span class="token constant">RRS</span>æ¶ˆæ¯è®¢é˜…<span class="token punctuation">.</span>AbstractSubscription<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span><span class="token constant">RRS</span>æ¶ˆæ¯è®¢é˜…<span class="token punctuation">.</span>IRss<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CsdnSystem</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSubscription</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ExecutorService</span> executor <span class="token operator">=</span>
            <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ä¸€æ—¦è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ‰€æœ‰ä¾èµ–äºcsdnç³»ç»Ÿçš„æ¶ˆæ¯è®¢é˜…è€…éƒ½å°†æ”¶åˆ°å˜æ›´çš„æ¶ˆæ¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CsdnSystem</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyRssers</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä½¿ç”¨è‡ªå·±çš„é€šçŸ¥ï¼Œé‡‡ç”¨çº¿ç¨‹æ± </span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyRssers</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">IRss</span> user <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rsses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> user<span class="token punctuation">.</span><span class="token function">rss</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="è§‚å¯Ÿè€…rssè®¢é˜…çš„ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿè€…rssè®¢é˜…çš„ç”¨æˆ·" aria-hidden="true">#</a> è§‚å¯Ÿè€…Rssè®¢é˜…çš„ç”¨æˆ·</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>æ¶ˆæ¯è®¢é˜…æ¥å£ï¼Œæä¾›ä¸€ä¸ªè®¢é˜…æ¶ˆæ¯å†…å®¹çš„å®ç°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IRss</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ¶ˆæ¯è®¢é˜…ï¼Œä¸»è¦è¾“å‡ºè®¢é˜…çš„å†…å®¹
     */</span>
    <span class="token keyword">void</span> <span class="token function">rss</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å…·ä½“å®ç°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æ¶ˆæ¯è®¢é˜…æ¶ˆè´¹è€…
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RssUser</span> <span class="token keyword">implements</span> <span class="token class-name">IRss</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * ç”¨æˆ·ID
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * ç”¨æˆ·åç§°
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RssUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rss</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å°Šæ•¬çš„ç”¨æˆ·ï¼ˆ id = &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&quot;,name = &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;),ä½ æœåˆ°äº†ä¸€æ¡è®¢é˜…æ¶ˆæ¯ï¼š&quot;</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="æµ‹è¯•-3" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-3" aria-hidden="true">#</a> æµ‹è¯•</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token string">&quot;å®˜æ–¹é€šçŸ¥ï¼šCSDNç‰ˆæœ¬å‡çº§,ç»´æŠ¤æ—¶é—´åˆ°&quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plusHours</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CsdnSystem</span> csdnSystem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CsdnSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">RssUser</span><span class="token punctuation">[</span><span class="token punctuation">]</span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RssUser</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token class-name">RssUser</span><span class="token punctuation">(</span><span class="token number">1000L</span><span class="token punctuation">,</span><span class="token string">&quot;hzz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">RssUser</span><span class="token punctuation">(</span><span class="token number">1001L</span><span class="token punctuation">,</span><span class="token string">&quot;love&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">RssUser</span><span class="token punctuation">(</span><span class="token number">1002L</span><span class="token punctuation">,</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> user <span class="token operator">-&gt;</span> csdnSystem<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        csdnSystem<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * å®˜æ–¹é€šçŸ¥ï¼šCSDNç‰ˆæœ¬å‡çº§,ç»´æŠ¤æ—¶é—´åˆ°2024-03-27T23:57:53.933
 * å°Šæ•¬çš„ç”¨æˆ·ï¼ˆ id = 1000,name = hzz),ä½ æœåˆ°äº†ä¸€æ¡è®¢é˜…æ¶ˆæ¯ï¼šå®˜æ–¹é€šçŸ¥ï¼šCSDNç‰ˆæœ¬å‡çº§,ç»´æŠ¤æ—¶é—´åˆ°2024-03-27T23:57:53.933
 * å°Šæ•¬çš„ç”¨æˆ·ï¼ˆ id = 1002,name = java),ä½ æœåˆ°äº†ä¸€æ¡è®¢é˜…æ¶ˆæ¯ï¼šå®˜æ–¹é€šçŸ¥ï¼šCSDNç‰ˆæœ¬å‡çº§,ç»´æŠ¤æ—¶é—´åˆ°2024-03-27T23:57:53.933
 * å°Šæ•¬çš„ç”¨æˆ·ï¼ˆ id = 1001,name = love),ä½ æœåˆ°äº†ä¸€æ¡è®¢é˜…æ¶ˆæ¯ï¼šå®˜æ–¹é€šçŸ¥ï¼šCSDNç‰ˆæœ¬å‡çº§,ç»´æŠ¤æ—¶é—´åˆ°2024-03-27T23:57:53.933
 */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…çš„ç†è§£" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…çš„ç†è§£" aria-hidden="true">#</a> è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…çš„ç†è§£</h3><h4 id="ç›‘æ§ç¨‹åºç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#ç›‘æ§ç¨‹åºç‰ˆæœ¬" aria-hidden="true">#</a> ç›‘æ§ç¨‹åºç‰ˆæœ¬</h4><p><a href="https://gitee.com/q10viking/design-patterns/tree/master/springboot-design-patterns/src/main/java/org/hzz/%E8%A1%8C%E4%B8%BA%E6%80%A7%E6%A8%A1%E5%BC%8F/BP1_%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/%E6%A1%88%E4%BE%8B/%E8%A7%82%E5%AF%9F%E8%80%85%E4%B8%8E%E8%A2%AB%E8%A7%82%E5%AF%9F%E8%80%85/%E7%9B%91%E6%8E%A7%E7%A8%8B%E5%BA%8F%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">Source Code<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>æˆ‘ä»¬è¦è§£å†³çš„æ˜¯ææ–¯æ˜¯æ€ä¹ˆç›‘æ§éŸ©éå­çš„ï¼Ÿåˆ›å»ºä¸€ä¸ªåå°çº¿ç¨‹ä¸€ç›´å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä¸€æ—¦å‘ç°éŸ©éå­åœ¨åƒé¥­æˆ–è€…å¨±ä¹å°±è§¦å‘äº‹ä»¶ï¼Ÿè¿™æ˜¯çœŸå®ä¸–ç•Œçš„ç¿»ç‰ˆï¼Œå®‰æ’äº†ä¸€ä¸ªé—´è°ï¼Œè§‚å¯ŸéŸ©éå­çš„ç”Ÿæ´»èµ·å±…ï¼Œå¹¶ä¸ŠæŠ¥ç»™ææ–¯ï¼Œç„¶åææ–¯å†è§¦å‘updateäº‹ä»¶</p><p><img src="/images/designpattern/image-20240327191221682.png" alt="image-20240327191221682"></p><h5 id="è¢«è§‚å¯ŸæŸ¥hanfeizi" tabindex="-1"><a class="header-anchor" href="#è¢«è§‚å¯ŸæŸ¥hanfeizi" aria-hidden="true">#</a> è¢«è§‚å¯ŸæŸ¥HanFeiZi</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è¢«è§‚å¯Ÿè€…<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * ç±»ä¼¼éŸ©éå­è¿™èŠ±æ ·çš„äººï¼Œè¢«ç›‘æ§èµ·æ¥äº†è¿˜ä¸çŸ¥é“
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IHanFeiZi</span> <span class="token punctuation">{</span>

    <span class="token comment">//éŸ©éå­ä¹Ÿæ˜¯äººï¼Œä¹Ÿè¦åƒæ—©é¥­çš„</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//éŸ©éä¹‹ä¹Ÿæ˜¯äººï¼Œæ˜¯äººå°±è¦å¨±ä¹æ´»åŠ¨ï¼Œ</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è¢«è§‚å¯Ÿè€…<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * éŸ©éå­ï¼Œææ–¯çš„å¸ˆå¼Ÿï¼ŒéŸ©å›½çš„é‡è¦äººç‰©
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HanFeiZi</span> <span class="token keyword">implements</span> <span class="token class-name">IHanFeiZi</span><span class="token punctuation">{</span>
    <span class="token comment">//éŸ©éå­æ˜¯å¦åœ¨åƒé¥­ï¼Œä½œä¸ºç›‘æ§çš„åˆ¤æ–­æ ‡å‡†</span>
    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> isHavingBreakfast <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">//éŸ©éå­æ˜¯å¦åœ¨å¨±ä¹</span>
    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> isHavingFun <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token comment">//éŸ©éå­è¦åƒé¥­äº†</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­:å¼€å§‹åƒé¥­äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isHavingBreakfast <span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//éŸ©éå­å¼€å§‹å¨±ä¹äº†,å¤ä»£äººæ²¡å•¥å¨±ä¹ï¼Œä½ èƒ½æƒ³åˆ°çš„å°±é‚£ä¹ˆå¤š</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­:å¼€å§‹å¨±ä¹äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isHavingFun <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä»¥ä¸‹æ˜¯beançš„åŸºæœ¬æ–¹æ³•ï¼Œgetter/setterï¼Œä¸å¤šè¯´</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isHavingBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> isHavingBreakfast<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHavingBreakfast</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isHavingBreakfast<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isHavingBreakfast <span class="token operator">=</span> isHavingBreakfast<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isHavingFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> isHavingFun<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHavingFun</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isHavingFun<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isHavingFun <span class="token operator">=</span> isHavingFun<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h5 id="è§‚å¯Ÿè€…ææ–¯" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿè€…ææ–¯" aria-hidden="true">#</a> è§‚å¯Ÿè€…ææ–¯</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * ç±»ä¼¼äºææ–¯çš„è¿™ç§äººï¼Œç°ä»£å˜›å«åšå·çª¥ç‹‚
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ILiSi</span> <span class="token punctuation">{</span>

    <span class="token comment">//ä¸€å‘ç°åˆ«äººæœ‰åŠ¨é™ï¼Œè‡ªå·±ä¹Ÿè¦è¡ŒåŠ¨èµ·æ¥</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * ææ–¯è¿™ä¸ªäººï¼Œæ˜¯ä¸ªè§‚å¯Ÿè€…ï¼Œåªè¦éŸ©éå­ä¸€æœ‰åŠ¨é™ï¼Œè¿™è¾¹å°±çŸ¥é“
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LiSi</span> <span class="token keyword">implements</span> <span class="token class-name">ILiSi</span><span class="token punctuation">{</span>

    <span class="token comment">//é¦–å…ˆææ–¯æ˜¯ä¸ªè§‚å¯Ÿè€…ï¼Œä¸€æ—¦éŸ©éå­æœ‰æ´»åŠ¨ï¼Œä»–å°±çŸ¥é“ï¼Œä»–å°±è¦å‘è€æ¿æ±‡æŠ¥</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ææ–¯:è§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨ï¼Œå¼€å§‹å‘è€æ¿æ±‡æŠ¥äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reportToQiShiHuang</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ææ–¯ï¼šæ±‡æŠ¥å®Œæ¯•ï¼Œç§¦è€æ¿èµç»™ä»–ä¸¤ä¸ªèåœåƒåƒ...\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ±‡æŠ¥ç»™ç§¦å§‹çš‡</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">reportToQiShiHuang</span><span class="token punctuation">(</span><span class="token class-name">String</span> reportContext<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ææ–¯ï¼šæŠ¥å‘Šï¼Œç§¦è€æ¿ï¼éŸ©éå­æœ‰æ´»åŠ¨äº†---&gt;&quot;</span><span class="token operator">+</span>reportContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="ç›‘æ§ç¨‹åº" tabindex="-1"><a class="header-anchor" href="#ç›‘æ§ç¨‹åº" aria-hidden="true">#</a> ç›‘æ§ç¨‹åº</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>ç›‘æ§ç¨‹åº<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>HanFeiZi<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">.</span>LiSi<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Spy</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">HanFeiZi</span> hanFeiZi<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LiSi</span> liSi<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span>

    <span class="token comment">//é€šè¿‡æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ï¼Œæˆ‘è¦ç›‘æ§çš„æ˜¯è°,è°æ¥ç›‘æ§,è¦ç›‘æ§ä»€ä¹ˆ</span>
    <span class="token keyword">public</span> <span class="token class-name">Spy</span><span class="token punctuation">(</span><span class="token class-name">HanFeiZi</span> _hanFeiZi<span class="token punctuation">,</span><span class="token class-name">LiSi</span> _liSi<span class="token punctuation">,</span><span class="token class-name">String</span> _type<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hanFeiZi <span class="token operator">=</span>_hanFeiZi<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liSi <span class="token operator">=</span> _liSi<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> _type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;breakfast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//ç›‘æ§æ˜¯å¦åœ¨åƒæ—©é¤</span>
                <span class="token comment">//å¦‚æœå‘ç°éŸ©éå­åœ¨åƒé¥­ï¼Œå°±é€šçŸ¥ææ–¯</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hanFeiZi<span class="token punctuation">.</span><span class="token function">isHavingBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>liSi<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­åœ¨åƒé¥­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//é‡ç½®çŠ¶æ€ï¼Œç»§ç»­ç›‘æ§</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>hanFeiZi<span class="token punctuation">.</span><span class="token function">setHavingBreakfast</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment">//ç›‘æ§æ˜¯å¦åœ¨å¨±ä¹</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hanFeiZi<span class="token punctuation">.</span><span class="token function">isHavingFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>liSi<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­åœ¨å¨±ä¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>hanFeiZi<span class="token punctuation">.</span><span class="token function">setHavingFun</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h5 id="æµ‹è¯•-4" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-4" aria-hidden="true">#</a> æµ‹è¯•</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>ç›‘æ§ç¨‹åº<span class="token punctuation">.</span>Spy<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>HanFeiZi<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>ç›‘æ§ç¨‹åºç‰ˆæœ¬<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">.</span>LiSi<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token comment">//å®šä¹‰å‡ºéŸ©éå­å’Œææ–¯</span>
        <span class="token class-name">LiSi</span> liSi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LiSi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HanFeiZi</span> hanFeiZi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HanFeiZi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è§‚å¯Ÿæ—©é¤</span>
        <span class="token class-name">Spy</span> watchBreakfast <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Spy</span><span class="token punctuation">(</span>hanFeiZi<span class="token punctuation">,</span>liSi<span class="token punctuation">,</span><span class="token string">&quot;breakfast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å¼€å§‹å¯åŠ¨çº¿ç¨‹ï¼Œç›‘æ§</span>
        watchBreakfast<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è§‚å¯Ÿå¨±ä¹æƒ…å†µ</span>
        <span class="token class-name">Spy</span> watchFun <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Spy</span><span class="token punctuation">(</span>hanFeiZi<span class="token punctuation">,</span>liSi<span class="token punctuation">,</span><span class="token string">&quot;fun&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        watchFun<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ç„¶åè¿™é‡Œæˆ‘ä»¬çœ‹çœ‹éŸ©éå­åœ¨å¹²ä»€ä¹ˆ</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä¸»çº¿ç¨‹ç­‰å¾…1ç§’ååå†å¾€ä¸‹æ‰§è¡Œ</span>
        hanFeiZi<span class="token punctuation">.</span><span class="token function">haveBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//éŸ©éå­å¨±ä¹äº†</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hanFeiZi<span class="token punctuation">.</span><span class="token function">haveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        watchBreakfast<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        watchFun<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * éŸ©éå­:å¼€å§‹åƒé¥­äº†...
 * ææ–¯:è§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨ï¼Œå¼€å§‹å‘è€æ¿æ±‡æŠ¥äº†...
 * ææ–¯ï¼šæŠ¥å‘Šï¼Œç§¦è€æ¿ï¼éŸ©éå­æœ‰æ´»åŠ¨äº†---&gt;éŸ©éå­åœ¨åƒé¥­
 * ææ–¯ï¼šæ±‡æŠ¥å®Œæ¯•ï¼Œç§¦è€æ¿èµç»™ä»–ä¸¤ä¸ªèåœåƒåƒ...
 *
 * éŸ©éå­:å¼€å§‹å¨±ä¹äº†...
 * ææ–¯:è§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨ï¼Œå¼€å§‹å‘è€æ¿æ±‡æŠ¥äº†...
 * ææ–¯ï¼šæŠ¥å‘Šï¼Œç§¦è€æ¿ï¼éŸ©éå­æœ‰æ´»åŠ¨äº†---&gt;éŸ©éå­åœ¨å¨±ä¹
 * ææ–¯ï¼šæ±‡æŠ¥å®Œæ¯•ï¼Œç§¦è€æ¿èµç»™ä»–ä¸¤ä¸ªèåœåƒåƒ...
 */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h4 id="å¼•å…¥è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥è®¾è®¡æ¨¡å¼" aria-hidden="true">#</a> å¼•å…¥è®¾è®¡æ¨¡å¼</h4><p><a href="https://gitee.com/q10viking/design-patterns/tree/master/springboot-design-patterns/src/main/java/org/hzz/%E8%A1%8C%E4%B8%BA%E6%80%A7%E6%A8%A1%E5%BC%8F/BP1_%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/%E6%A1%88%E4%BE%8B/%E8%A7%82%E5%AF%9F%E8%80%85%E4%B8%8E%E8%A2%AB%E8%A7%82%E5%AF%9F%E8%80%85/%E5%BC%95%E5%85%A5%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">Source Code<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h5 id="è¢«è§‚å¯Ÿè€…observable" tabindex="-1"><a class="header-anchor" href="#è¢«è§‚å¯Ÿè€…observable" aria-hidden="true">#</a> è¢«è§‚å¯Ÿè€…Observable</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æ‰€æœ‰è¢«è§‚å¯Ÿè€…è€…ï¼Œé€šç”¨æ¥å£
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token comment">//å¢åŠ ä¸€ä¸ªè§‚å¯Ÿè€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//åˆ é™¤ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œâ€”â€”æˆ‘ä¸æƒ³è®©ä½ çœ‹äº†</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//æ—¢ç„¶è¦è§‚å¯Ÿï¼Œæˆ‘å‘ç”Ÿæ”¹å˜äº†ä»–ä¹Ÿåº”è¯¥ç”¨æ‰€åŠ¨ä½œâ€”â€”é€šçŸ¥è§‚å¯Ÿè€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>éŸ©éå­ä¸ªäººè¡Œä¸º</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IHanFeiZi</span> <span class="token punctuation">{</span>

    <span class="token comment">//éŸ©éå­ä¹Ÿæ˜¯äººï¼Œä¹Ÿè¦åƒæ—©é¥­çš„</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//éŸ©éä¹‹ä¹Ÿæ˜¯äººï¼Œæ˜¯äººå°±è¦å¨±ä¹æ´»åŠ¨ï¼Œè‡³äºæ´»åŠ¨æ—¶å•¥ï¼Œå˜¿å˜¿ï¼Œä¸è¯´äº†</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å®ç°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è¢«è§‚å¯Ÿè€…å¯¹è±¡<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>Observable<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>Observer<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ThreadPoolExecutor</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HanFeiZi</span> <span class="token keyword">implements</span> <span class="token class-name">Observable</span><span class="token punctuation">,</span><span class="token class-name">IHanFeiZi</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadPoolExecutor</span> executor <span class="token operator">=</span>
            <span class="token punctuation">(</span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">)</span><span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å®šä¹‰ä¸ªå˜é•¿æ•°ç»„ï¼Œå­˜æ”¾æ‰€æœ‰çš„è§‚å¯Ÿè€…</span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span> observerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//å¢åŠ è§‚å¯Ÿè€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//åˆ é™¤è§‚å¯Ÿè€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observerList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token operator">:</span> observerList<span class="token punctuation">)</span><span class="token punctuation">{</span>
            executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//éŸ©éå­è¦åƒé¥­äº†</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­:å¼€å§‹åƒé¥­äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­åœ¨åƒé¥­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//éŸ©éå­å¼€å§‹å¨±ä¹äº†,å¤ä»£äººæ²¡å•¥å¨±ä¹ï¼Œä½ èƒ½æƒ³åˆ°çš„å°±é‚£ä¹ˆå¤š</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">haveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­:å¼€å§‹å¨±ä¹äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token string">&quot;éŸ©éå­åœ¨å¨±ä¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h5 id="è§‚å¯Ÿè€…" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿè€…" aria-hidden="true">#</a> è§‚å¯Ÿè€…</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token doc-comment comment">/**
 * æ‰€æœ‰è§‚å¯Ÿè€…ï¼Œé€šç”¨æ¥å£
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token comment">//ä¸€å‘ç°åˆ«äººæœ‰åŠ¨é™ï¼Œè‡ªå·±ä¹Ÿè¦è¡ŒåŠ¨èµ·æ¥</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸‰ä¸ªè§‚å¯Ÿè€…å®ç°ç±»</p><ol><li>ææ–¯</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>Observer<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LiSi</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">//é¦–å…ˆææ–¯æ˜¯ä¸ªè§‚å¯Ÿè€…ï¼Œä¸€æ—¦éŸ©éå­æœ‰æ´»åŠ¨ï¼Œä»–å°±çŸ¥é“ï¼Œä»–å°±è¦å‘è€æ¿æ±‡æŠ¥</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------------------&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;-------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ææ–¯ï¼šè§‚å¯Ÿåˆ°ææ–¯æ´»åŠ¨ï¼Œå¼€å§‹å‘è€æ¿æ±‡æŠ¥äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reportToQiShiHuang</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ææ–¯ï¼šæ±‡æŠ¥å®Œæ¯•ï¼Œç§¦è€æ¿èµç»™ä»–ä¸¤ä¸ªèåœåƒåƒ...\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ±‡æŠ¥ç»™ç§¦å§‹çš‡</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">reportToQiShiHuang</span><span class="token punctuation">(</span><span class="token class-name">String</span> reportContext<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ææ–¯ï¼šæŠ¥å‘Šï¼Œç§¦è€æ¿ï¼éŸ©éå­æœ‰æ´»åŠ¨äº†---&gt;&quot;</span><span class="token operator">+</span>reportContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="2"><li>åˆ˜æ–¯</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>Observer<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * åˆ˜æ–¯è¿™ä¸ªäººï¼Œæ˜¯ä¸ªè§‚å¯Ÿè€…ï¼Œåªè¦éŸ©éå­ä¸€æœ‰åŠ¨é™ï¼Œè¿™è¾¹å°±çŸ¥é“
 * æœæ’°çš„äººå
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LiuSi</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ˜æ–¯ï¼Œè§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨åï¼Œè‡ªå·±ä¹Ÿåšä¸€å®šå¾—äº‹æƒ…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------------------&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;-------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ˜æ–¯ï¼šè§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨ï¼Œå¼€å§‹åŠ¨ä½œäº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">happy</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ˜æ–¯ï¼šçœŸè¢«ä¹æ­»äº†\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸€çœ‹éŸ©éå­æœ‰å˜åŒ–ï¼Œä»–å°±å¿«ä¹</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">happy</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ˜æ–¯ï¼šå› ä¸º&quot;</span> <span class="token operator">+</span>context<span class="token operator">+</span><span class="token string">&quot;,â€”â€”æ‰€ä»¥æˆ‘å¿«ä¹å‘€ï¼&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ol start="3"><li>ç‹æ–¯</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>Observer<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * ç‹æ–¯ï¼Œä¹Ÿæ˜¯è§‚å¯Ÿè€…ï¼Œæœæ’°çš„äººå
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WangSi</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç‹æ–¯ï¼Œçœ‹åˆ°ææ–¯æœ‰æ´»åŠ¨ï¼Œè‡ªå·±å°±å—ä¸äº†</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------------------&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;-------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹æ–¯ï¼šè§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨ï¼Œè‡ªå·±ä¹Ÿå¼€å§‹æ´»åŠ¨äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cry</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹æ–¯ï¼šçœŸçœŸçš„å“­æ­»äº†...\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸€çœ‹ææ–¯æœ‰æ´»åŠ¨ï¼Œå°±å“­ï¼Œç—›å“­</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹æ–¯ï¼šå› ä¸º&quot;</span><span class="token operator">+</span>context<span class="token operator">+</span><span class="token string">&quot;ï¼Œâ€”â€”æ‰€ä»¥æˆ‘æ‚²ä¼¤å‘€ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="æµ‹è¯•-5" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•-5" aria-hidden="true">#</a> æµ‹è¯•</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è¢«è§‚å¯Ÿè€…å¯¹è±¡<span class="token punctuation">.</span>HanFeiZi<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">.</span>LiSi<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">.</span>LiuSi<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hzz<span class="token punctuation">.</span></span>è¡Œä¸ºæ€§æ¨¡å¼<span class="token punctuation">.</span><span class="token constant">BP1_</span>è§‚å¯Ÿè€…æ¨¡å¼<span class="token punctuation">.</span>æ¡ˆä¾‹<span class="token punctuation">.</span>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…<span class="token punctuation">.</span>å¼•å…¥è®¾è®¡æ¨¡å¼<span class="token punctuation">.</span>è§‚å¯Ÿè€…<span class="token punctuation">.</span>WangSi<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è§‚å¯Ÿè€…</span>
        <span class="token class-name">Observer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> observers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token class-name">LiSi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">WangSi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">LiuSi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// è¢«è§‚å¯Ÿè€…</span>
        <span class="token class-name">HanFeiZi</span> hanFeiZi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HanFeiZi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>observers<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>hanFeiZi<span class="token operator">::</span><span class="token function">addObserver</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        hanFeiZi<span class="token punctuation">.</span><span class="token function">haveBreakfast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * éŸ©éå­:å¼€å§‹åƒé¥­äº†...
 * -------------------pool-1-thread-1-------------------------
 * ææ–¯ï¼šè§‚å¯Ÿåˆ°ææ–¯æ´»åŠ¨ï¼Œå¼€å§‹å‘è€æ¿æ±‡æŠ¥äº†...
 * ææ–¯ï¼šæŠ¥å‘Šï¼Œç§¦è€æ¿ï¼éŸ©éå­æœ‰æ´»åŠ¨äº†---&gt;éŸ©éå­åœ¨åƒé¥­
 * ææ–¯ï¼šæ±‡æŠ¥å®Œæ¯•ï¼Œç§¦è€æ¿èµç»™ä»–ä¸¤ä¸ªèåœåƒåƒ...
 *
 * -------------------pool-1-thread-2-------------------------
 * ç‹æ–¯ï¼šè§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨ï¼Œè‡ªå·±ä¹Ÿå¼€å§‹æ´»åŠ¨äº†...
 * ç‹æ–¯ï¼šå› ä¸ºéŸ©éå­åœ¨åƒé¥­ï¼Œâ€”â€”æ‰€ä»¥æˆ‘æ‚²ä¼¤å‘€ï¼
 * ç‹æ–¯ï¼šçœŸçœŸçš„å“­æ­»äº†...
 *
 * -------------------pool-1-thread-3-------------------------
 * åˆ˜æ–¯ï¼šè§‚å¯Ÿåˆ°éŸ©éå­æ´»åŠ¨ï¼Œå¼€å§‹åŠ¨ä½œäº†...
 * åˆ˜æ–¯ï¼šå› ä¸ºéŸ©éå­åœ¨åƒé¥­,â€”â€”æ‰€ä»¥æˆ‘å¿«ä¹å‘€ï¼
 * åˆ˜æ–¯ï¼šçœŸè¢«ä¹æ­»äº†
 */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> â† <a href="/designpattern/" class="nav-link router-link-active" aria-label="Back To ç›®å½•"><!--[--><!--]--> Back To ç›®å½• <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.2c87fbe0.js" defer></script><script src="/assets/js/95615.aba5921d.js" defer></script><script src="/assets/js/app.4aafd1f6.js" defer></script>
  </body>
</html>
