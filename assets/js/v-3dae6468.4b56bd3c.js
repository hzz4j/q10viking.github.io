"use strict";(self.webpackChunkq10viking_github_io=self.webpackChunkq10viking_github_io||[]).push([[47055],{59862:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-3dae6468",path:"/java/51%20%E5%85%8B%E9%9A%86%E4%B8%8E%E5%BA%8F%E5%88%97%E5%8C%96.html",title:"",lang:"zh-CN",frontmatter:{sidebarDepth:3,sidebar:"auto",prev:{text:"Back To ç›®å½•",link:"/java/"},"typora-root-url":"..\\.vuepress\\public"},excerpt:"",headers:[{level:2,title:"å…‹éš†",slug:"å…‹éš†",children:[{level:3,title:"èƒŒæ™¯",slug:"èƒŒæ™¯",children:[]}]},{level:2,title:"æµ…æ‹·è´",slug:"æµ…æ‹·è´",children:[{level:3,title:"å­˜åœ¨çš„é—®é¢˜",slug:"å­˜åœ¨çš„é—®é¢˜",children:[]}]},{level:2,title:"æ·±æ‹·è´",slug:"æ·±æ‹·è´",children:[{level:3,title:"å¼•ç”¨å¯¹è±¡å®ç°äº†Cloneableæ¥å£",slug:"å¼•ç”¨å¯¹è±¡å®ç°äº†cloneableæ¥å£",children:[]},{level:3,title:"åºåˆ—åŒ–å®ç°æ·±æ‹·è´",slug:"åºåˆ—åŒ–å®ç°æ·±æ‹·è´",children:[]}]},{level:2,title:"åºåˆ—åŒ–å’Œååºåˆ—åŒ–",slug:"åºåˆ—åŒ–å’Œååºåˆ—åŒ–",children:[{level:3,title:"serialVersionUIDçš„ä½œç”¨",slug:"serialversionuidçš„ä½œç”¨",children:[]},{level:3,title:"åºåˆ—åŒ–æ—¶æŸäº›æˆå‘˜ä¸éœ€è¦åºåˆ—åŒ–(transient)å…³é”®å­—ğŸ˜Š",slug:"åºåˆ—åŒ–æ—¶æŸäº›æˆå‘˜ä¸éœ€è¦åºåˆ—åŒ–-transient-å…³é”®å­—ğŸ˜Š",children:[]},{level:3,title:"Ideaè‡ªåŠ¨ç”ŸæˆserialVersionUIDâ¤ï¸",slug:"ideaè‡ªåŠ¨ç”Ÿæˆserialversionuidâ¤ï¸",children:[]},{level:3,title:"æ¶‰åŠçš„java apiğŸ˜˜",slug:"æ¶‰åŠçš„java-apiğŸ˜˜",children:[]}]},{level:2,title:"å¸¸è§çš„åºåˆ—åŒ–",slug:"å¸¸è§çš„åºåˆ—åŒ–",children:[]}],filePathRelative:"java/51 å…‹éš†ä¸åºåˆ—åŒ–.md"}},46323:(n,s,a)=>{a.r(s),a.d(s,{default:()=>d});var p=a(20641);const e={href:"https://github.com/Q10Viking/learncode/tree/main/javabasic/src/org/hzz/serialize",target:"_blank",rel:"noopener noreferrer"},t=(0,p.Fv)('<h2 id="å…‹éš†" tabindex="-1"><a class="header-anchor" href="#å…‹éš†" aria-hidden="true">#</a> å…‹éš†</h2><h3 id="èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#èƒŒæ™¯" aria-hidden="true">#</a> èƒŒæ™¯</h3><p>æ™®é€šçš„å¯¹è±¡å¤åˆ¶ï¼Œå­˜åœ¨çš„é—®é¢˜ï¼Œå¦‚ä¸‹ä»£ç </p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CloneTest</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// ç­‰å·èµ‹å€¼ï¼ˆ åŸºæœ¬ç±»å‹ï¼‰</span>\n        <span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> number2 <span class="token operator">=</span> number<span class="token punctuation">;</span>\n        <span class="token comment">// ä¿®æ”¹ number2 çš„å€¼</span>\n        number2 <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;numberï¼š&quot;</span> <span class="token operator">+</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;number2ï¼š&quot;</span> <span class="token operator">+</span> number2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// ç­‰å·èµ‹å€¼ï¼ˆå¯¹è±¡ï¼‰</span>\n        <span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        dog<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;æ—ºè´¢&quot;</span><span class="token punctuation">;</span>\n        dog<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n        <span class="token class-name">Dog</span> dog2 <span class="token operator">=</span> dog<span class="token punctuation">;</span>\n        <span class="token comment">// ä¿®æ”¹ dog2 çš„å€¼</span>\n        dog2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;å¤§é»„&quot;</span><span class="token punctuation">;</span>\n        dog2<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;ï¼Œ&quot;</span> <span class="token operator">+</span> dog<span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token string">&quot;å²&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog2<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;ï¼Œ&quot;</span> <span class="token operator">+</span> dog2<span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token string">&quot;å²&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * numberï¼š6\n * number2ï¼š9\n * å¤§é»„ï¼Œ3å²\n * å¤§é»„ï¼Œ3å²\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><blockquote><p>å¯ä»¥çœ‹åˆ°å†dog2ä¸­ä¿®æ”¹åå­—ç›´æ¥å½±å“åˆ°äº†dogå¯¹è±¡ï¼Œè¿™æ˜¯å› ä¸ºä»–ä»¬å¼•ç”¨çš„éƒ½æ˜¯å †ä¸ŠåŒä¸€ä¸ªå¯¹è±¡</p></blockquote><p><img src="/images/java/21bdbb00-c95b-11e9-80ba-3b9ebd4a5c21.png" alt=""></p><h2 id="æµ…æ‹·è´" tabindex="-1"><a class="header-anchor" href="#æµ…æ‹·è´" aria-hidden="true">#</a> æµ…æ‹·è´</h2><p>ä¸¤æ­¥éª¤</p><ol><li><p>å®ç°<code>Cloneable</code>æ¥å£ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œé‡Œé¢å¹¶æ²¡æœ‰æ–¹æ³•ã€‚æ³¨æ„ï¼šå®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå¿…é¡»è¦è¦†ç›–Objectçš„cloneæ–¹æ³•</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>è¦†ç›–Objectä¸­çš„cloneæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é»˜è®¤æ˜¯protectedç±»å‹ï¼Œæˆ‘ä»¬å°†å®ƒæ”¹ä¸ºpublicï¼Œä¸€è¾¹å¤–ç•Œèƒ½å¤Ÿè®¿é—®ã€‚æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰å®ç°<code>Cloneable</code>æ¥å£ï¼Œjvmä¼šæŠ›å‡ºå¼‚å¸¸<code>CloneNotSupportedException</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Object</span><span class="token punctuation">{</span>\n    <span class="token comment">// æ˜¯ä¸€ä¸ªnativeæ–¹æ³•</span>\n    <span class="token keyword">protected</span> <span class="token keyword">native</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol><blockquote><p>å®ç°</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>\n\n    <span class="token comment">// é‡å†™cloneæ–¹æ³•</span>\n    <span class="token annotation punctuation">@Override</span>\n    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>æµ‹è¯•</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShallowClone</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n       <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n       <span class="token class-name">User</span> user2 <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n       user2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Q10Viking&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * User(name=å¼ ä¸‰, age=18)\n * User(name=Q10Viking, age=18)\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="å­˜åœ¨çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å­˜åœ¨çš„é—®é¢˜" aria-hidden="true">#</a> å­˜åœ¨çš„é—®é¢˜</h3><p>å¦‚æœå¯¹è±¡çš„å±æ€§è¿˜å¼•ç”¨äº†å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆæµ…æ‹·è´åªä¼šå¤åˆ¶è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨åœ°å€ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">City</span> city<span class="token punctuation">;</span>\n\n    <span class="token annotation punctuation">@Override</span>\n    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">City</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p>æµ‹è¯•</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShallowProblemTest</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">User</span> user2 <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        user2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Q10Viking&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        user2<span class="token punctuation">.</span><span class="token function">getCity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å¹¿å·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * User(name=å¼ ä¸‰, city=City(name=å¹¿å·))\n * User(name=Q10Viking, city=City(name=å¹¿å·))\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>å¯ä»¥user2æ”¹å˜Cityï¼Œå½±å“åˆ°äº†userçš„city,ä½†æ˜¯nameä¸å—å½±å“</p></blockquote><h2 id="æ·±æ‹·è´" tabindex="-1"><a class="header-anchor" href="#æ·±æ‹·è´" aria-hidden="true">#</a> æ·±æ‹·è´</h2><p>æ·±å…‹éš†å°±æ˜¯å¤åˆ¶æ•´ä¸ªå¯¹è±¡ä¿¡æ¯ï¼ŒåŒ…å«å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹,è§£å†³æµ…æ‹·è´çš„é—®é¢˜</p><p><strong>æ·±å…‹éš†çš„å®ç°æ–¹å¼</strong> é€šå¸¸åŒ…å«ä»¥ä¸‹ä¸¤ç§ã€‚</p><ul><li>åºåˆ—åŒ–å®ç°æ·±å…‹éš†ï¼šå…ˆå°†åŸå¯¹è±¡åºåˆ—åŒ–åˆ°å†…å­˜çš„å­—èŠ‚æµä¸­ï¼Œå†ä»å­—èŠ‚æµä¸­ååºåˆ—åŒ–å‡ºåˆšåˆšå­˜å‚¨çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡å’ŒåŸå¯¹è±¡å°±ä¸å­˜åœ¨ä»»ä½•åœ°å€ä¸Šçš„å…±äº«ï¼Œè¿™æ ·å°±å®ç°äº†æ·±å…‹éš†ã€‚</li><li>æ‰€æœ‰å¼•ç”¨ç±»å‹éƒ½å®ç°å…‹éš†ï¼šè¦å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ç±»å‹éƒ½è¦å®ç°å…‹éš†ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æ˜¯å¤åˆ¶çš„æ–°å¯¹è±¡ï¼Œä»è€Œå®ç°äº†æ·±å…‹éš†ã€‚</li></ul><h3 id="å¼•ç”¨å¯¹è±¡å®ç°äº†cloneableæ¥å£" tabindex="-1"><a class="header-anchor" href="#å¼•ç”¨å¯¹è±¡å®ç°äº†cloneableæ¥å£" aria-hidden="true">#</a> å¼•ç”¨å¯¹è±¡å®ç°äº†Cloneableæ¥å£</h3><ol><li>å¼•ç”¨å¯¹è±¡è¦å®ç°Cloneæ¥å£ï¼Œå¹¶ä¸”è¦†ç›–Objectçš„cloneæ–¹æ³•</li><li>åœ¨çˆ¶å¯¹è±¡ä¸­ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨å¯¹å¼•ç”¨å¯¹è±¡è¿›è¡Œclone.</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">City</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n\n    <span class="token annotation punctuation">@Override</span>\n    <span class="token keyword">public</span> <span class="token class-name">City</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">City</span><span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n\n<span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">City</span> city<span class="token punctuation">;</span>\n\n    <span class="token annotation punctuation">@Override</span>\n    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n        <span class="token class-name">User</span> user <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        user<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span>city<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> user<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><blockquote><p>æµ‹è¯•</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeepCloneTest</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">User</span> user2 <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        user2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Q10Viking&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        user2<span class="token punctuation">.</span><span class="token function">getCity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å¹¿å·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * User(name=å¼ ä¸‰, city=City(name=åŒ—äº¬))\n * User(name=Q10Viking, city=City(name=å¹¿å·))\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>å¦‚æœå±æ€§æ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼å¤„ç†èµ·æ¥ä¼šç›¸å½“ç¹çï¼Œé‚£ä¹ˆè¿˜æœ‰ç¬¬äºŒç§æ–¹å¼ï¼Œé€šè¿‡åºåˆ—çš„æ–¹å¼</p></blockquote><h3 id="åºåˆ—åŒ–å®ç°æ·±æ‹·è´" tabindex="-1"><a class="header-anchor" href="#åºåˆ—åŒ–å®ç°æ·±æ‹·è´" aria-hidden="true">#</a> åºåˆ—åŒ–å®ç°æ·±æ‹·è´</h3><p>å…ˆå°†è¦æ‹·è´å¯¹è±¡å†™å…¥åˆ°å†…å­˜ä¸­çš„å­—èŠ‚æµä¸­ï¼Œç„¶åå†ä»è¿™ä¸ªå­—èŠ‚æµä¸­è¯»å‡ºåˆšåˆšå­˜å‚¨çš„ä¿¡æ¯ï¼Œä½œä¸ºä¸€ä¸ªæ–°å¯¹è±¡è¿”å›ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°å¯¹è±¡å’ŒåŸå¯¹è±¡å°±ä¸å­˜åœ¨ä»»ä½•åœ°å€ä¸Šçš„å…±äº«ï¼Œè‡ªç„¶å®ç°äº†æ·±æ‹·è´ã€‚</p><ul><li>å¯¹è±¡è¦å®ç°åºåˆ—åŒ–æ¥å£ï¼ŒåŒ…æ‹¬å¼•ç”¨çš„å¯¹è±¡ä¹Ÿè¦å®ç°åºåˆ—åŒ–æ¥å£</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">City</span> city<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n\n<span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">City</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>æµ‹è¯•</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeepCloneTest</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>\n        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token class-name">CloneUtils</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        user2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Q10Viking&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        user2<span class="token punctuation">.</span><span class="token function">getCity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å¹¿å·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * User(name=å¼ ä¸‰, city=City(name=åŒ—äº¬))\n * User(name=Q10Viking, city=City(name=å¹¿å·))\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>ä½¿ç”¨ByteArrayOutputStreamä¸ObjectOutputStreamç­‰ç±»å®ç°åºåˆ—åŒ–å·¥å…·</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CloneUtils</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">T</span> cloneObj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">try</span> <span class="token punctuation">{</span>\n            <span class="token comment">//å†™å…¥å­—èŠ‚æµ</span>\n            <span class="token class-name">ByteArrayOutputStream</span> bo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>bo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token comment">//åˆ†é…å†…å­˜,å†™å…¥åŸå§‹å¯¹è±¡,ç”Ÿæˆæ–°å¯¹è±¡</span>\n            <span class="token class-name">ByteArrayInputStream</span> bi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bo<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–ä¸Šé¢çš„è¾“å‡ºå­—èŠ‚æµ</span>\n            <span class="token class-name">ObjectInputStream</span> oi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>bi<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token comment">//è¿”å›ç”Ÿæˆçš„æ–°å¯¹è±¡</span>\n            cloneObj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> oi<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            oi<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> cloneObj<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="åºåˆ—åŒ–å’Œååºåˆ—åŒ–" tabindex="-1"><a class="header-anchor" href="#åºåˆ—åŒ–å’Œååºåˆ—åŒ–" aria-hidden="true">#</a> åºåˆ—åŒ–å’Œååºåˆ—åŒ–</h2><blockquote><p>å†…å­˜ä¸­çš„æ•°æ®å¯¹è±¡åªæœ‰è½¬æ¢æˆäºŒè¿›åˆ¶æµæ‰èƒ½è¿›è¡Œæ•°æ®æŒä¹…åŒ–æˆ–è€…ç½‘ç»œä¼ è¾“ï¼Œå°†å¯¹è±¡è½¬æ¢æˆäºŒè¿›åˆ¶æµçš„è¿‡ç¨‹å«åšåºåˆ—åŒ–ï¼ˆSerializationï¼‰ï¼›ç›¸åï¼ŒæŠŠäºŒè¿›åˆ¶æµæ¢å¤ä¸ºæ•°æ®å¯¹è±¡çš„è¿‡ç¨‹å°±ç§°ä¹‹ä¸ºååºåˆ—åŒ–ï¼ˆDeserializationï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Serializable</span>æ¥å£ä¸<span class="token class-name">ObjectInputStream</span>å’Œ<span class="token class-name">ObjectOutputStream</span>æœ‰å…³\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></blockquote>',39),o={href:"https://cloud.tencent.com/developer/article/1697377",target:"_blank",rel:"noopener noreferrer"},c=(0,p.Fv)('<blockquote><p>å…ˆæŠŠå¯¹è±¡åºåˆ—åŒ–åˆ°ç£ç›˜ï¼Œå†ä»ç£ç›˜ä¸­ååºåˆ—åŒ–å‡ºå¯¹è±¡</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mobile</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5527474321867536114L</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SerializableTest</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Mobile</span> mobile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mobile</span><span class="token punctuation">(</span><span class="token string">&quot;iPhone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// åˆ›å»ºè¾“å‡ºæµï¼ˆåºåˆ—åŒ–å†…å®¹åˆ°ç£ç›˜ï¼‰</span>\n        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.out&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// åºåˆ—åŒ–å¯¹è±¡</span>\n        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        oos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token comment">// åˆ›å»ºè¾“å…¥æµï¼ˆä»ç£ç›˜ååºåˆ—åŒ–ï¼‰</span>\n        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.out&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// ååºåˆ—åŒ–</span>\n        <span class="token class-name">Mobile</span> mobile1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Mobile</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * Mobile(name=iPhone)\n * Mobile(name=iPhone)\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><img src="/images/java/image-20230515220516992.png" alt="image-20230515220516992"></p><h3 id="serialversionuidçš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#serialversionuidçš„ä½œç”¨" aria-hidden="true">#</a> serialVersionUIDçš„ä½œç”¨</h3><p>å¦‚æœæ˜¾ç¤ºå®šä¹‰äº† serialVersionUID å€¼ä¹‹åï¼Œå¯ä»¥ä½¿åºåˆ—åŒ–å’Œååºåˆ—åŒ–å‘åå…¼å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœ serialVersionUIDçš„å€¼ç›¸åŒï¼Œä¿®æ”¹å¯¹è±¡çš„å­—æ®µï¼ˆåˆ é™¤æˆ–å¢åŠ ï¼‰ï¼Œç¨‹åºä¸ä¼šæŠ¥é”™ï¼Œä¹‹åç»™æ²¡æœ‰çš„å­—æ®µèµ‹å€¼ä¸º nullï¼Œè€Œå¦‚æœæ²¡æœ‰æŒ‡å®š serialVersionUIDçš„å€¼ï¼Œå¦‚æœä¿®æ”¹å¯¹è±¡çš„å­—æ®µï¼Œç¨‹åºå°±ä¼šæŠ¥é”™</p><p>ä¸Šé¢æˆ‘ä»¬ç”Ÿæˆäº†<code>test.out</code>æ–‡ä»¶ï¼Œå¯¹åº”çš„æ˜¯è¿™ä¸ªå¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mobile</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5527474321867536114L</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ç°åœ¨æˆ‘ä»¬å†ååºåˆ—åŒ–ï¼Œåªä¸è¿‡ï¼Œæˆ‘ä»¬å¤šæ·»åŠ ä¸€ä¸ªå­—æ®µ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mobile</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5527474321867536114L</span><span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>æµ‹è¯•ï¼š å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¤šæ·»åŠ äº†ä¸€ä¸ªå­—æ®µï¼Œå¯ä»¥ååºåˆ—æˆåŠŸï¼Œåªä¸è¿‡æ–°å­—æ®µä¸ºnull</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SerializableTest2</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>\n        <span class="token comment">// åˆ›å»ºè¾“å…¥æµï¼ˆä»ç£ç›˜ååºåˆ—åŒ–ï¼‰</span>\n        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.out&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// ååºåˆ—åŒ–</span>\n        <span class="token class-name">Mobile</span> mobile <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Mobile</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * Mobile(name=iPhone, price=null)\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><p>è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œåªä¸è¿‡è¿™æ¬¡æˆ‘ä»¬æŠŠserialVersionUIDåˆ é™¤æ‰ï¼Œå†ååºåˆ—åŒ–</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mobile</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>\n    <span class="token comment">// æ³¨é‡Šæ‰</span>\n    <span class="token comment">// private static final long serialVersionUID = -5527474321867536114L;</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼ŒæŠ¥å¼‚å¸¸ï¼Œå› ä¸ºç±»çš„serialVersionUIDä¸å­˜å‚¨çš„åºåˆ—åŒ–ä¸ä¸€è‡´ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Exception <span class="token keyword">in</span> thread <span class="token string">&quot;main&quot;</span> java.io.InvalidClassException: org.hzz.serialize.Mobile<span class="token punctuation">;</span> <span class="token builtin class-name">local</span> class incompatible: stream classdesc serialVersionUID <span class="token operator">=</span> -5527474321867536114, <span class="token builtin class-name">local</span> class serialVersionUID <span class="token operator">=</span> <span class="token parameter variable">-1401851042268655216</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="åºåˆ—åŒ–æ—¶æŸäº›æˆå‘˜ä¸éœ€è¦åºåˆ—åŒ–-transient-å…³é”®å­—ğŸ˜Š" tabindex="-1"><a class="header-anchor" href="#åºåˆ—åŒ–æ—¶æŸäº›æˆå‘˜ä¸éœ€è¦åºåˆ—åŒ–-transient-å…³é”®å­—ğŸ˜Š" aria-hidden="true">#</a> åºåˆ—åŒ–æ—¶æŸäº›æˆå‘˜ä¸éœ€è¦åºåˆ—åŒ–(transient)å…³é”®å­—ğŸ˜Š</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">transient</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="ideaè‡ªåŠ¨ç”Ÿæˆserialversionuidâ¤ï¸" tabindex="-1"><a class="header-anchor" href="#ideaè‡ªåŠ¨ç”Ÿæˆserialversionuidâ¤ï¸" aria-hidden="true">#</a> Ideaè‡ªåŠ¨ç”ŸæˆserialVersionUIDâ¤ï¸</h3>',20),l={href:"https://cloud.tencent.com/developer/article/1697377",target:"_blank",rel:"noopener noreferrer"},u=(0,p.Fv)('<p>ç‚¹å‡» Settings â†’ Inspections â†’ æœç´¢ Serialization issues â†’ å‹¾é€‰ <code>Serializable class without &#39;SerialVersionUID&#39;</code> ä¿å­˜è®¾ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/images/java/60afa9d0-c95c-11e9-a43e-c98246251c8a.png" alt=""></p><p>ç½®å®Œä¹‹åï¼Œå…‰æ ‡æ”¾åˆ°ç±»åä¸Šï¼Œç‚¹å‡»æç¤ºï¼Œç”Ÿæˆ serialVersionUIDï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆè®°å¾—é‡å¯IDEAï¼‰</p><p><img src="/images/java/8d290240-c95c-11e9-a43e-c98246251c8a" alt=""></p><h3 id="æ¶‰åŠçš„java-apiğŸ˜˜" tabindex="-1"><a class="header-anchor" href="#æ¶‰åŠçš„java-apiğŸ˜˜" aria-hidden="true">#</a> æ¶‰åŠçš„java apiğŸ˜˜</h3><p>åœ¨ Java ä¸­åºåˆ—åŒ–ç”± java.io.ObjectOutputStreamç±»å®Œæˆï¼Œè¯¥ç±»æ˜¯ä¸€ä¸ªç­›é€‰å™¨æµï¼Œå®ƒå°è£…åœ¨è¾ƒä½çº§åˆ«çš„å­—èŠ‚æµä¸­ï¼Œä»¥å¤„ç†åºåˆ—åŒ–æœºåˆ¶ã€‚è¦é€šè¿‡åºåˆ—åŒ–æœºåˆ¶å­˜å‚¨ä»»ä½•å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ObjectOutputStream.writeObject(savethisobject) æ–¹æ³•ï¼Œå¦‚æœè¦ååºåˆ—åŒ–è¯¥å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ObjectInputStream.readObject() æ–¹æ³•ï¼ŒreadObject() æ–¹æ³•ä¼šè¯»å–å­—èŠ‚ï¼Œå¹¶æŠŠè¿™äº›å­—èŠ‚è½¬æ¢ä¸ºå¯¹è±¡å†è¿”å›</p><h2 id="å¸¸è§çš„åºåˆ—åŒ–" tabindex="-1"><a class="header-anchor" href="#å¸¸è§çš„åºåˆ—åŒ–" aria-hidden="true">#</a> å¸¸è§çš„åºåˆ—åŒ–</h2>',7),i=(0,p.Lk)("li",null,"ä¸Šé¢çš„å°±æ˜¯JavaåŸç”Ÿçš„åºåˆ—åŒ–ï¼Œæ¯”è¾ƒç¬¨é‡",-1),r=(0,p.Lk)("li",null,"gRPCä½¿ç”¨çš„protobuf",-1),k={href:"https://blog.csdn.net/youanyyou/article/details/124418024",target:"_blank",rel:"noopener noreferrer"},b=(0,p.Fv)('<blockquote><p>å¦‚fastjson2æ¥ä½¿ç”¨</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>\n<span class="token annotation punctuation">@AllArgsConstructor</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Goods</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FastJson2Demo</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Goods</span> goods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;iPhone&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goods<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token comment">// åºåˆ—åŒ–</span>\n        <span class="token class-name">String</span> goodsJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>goods<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goodsJson<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token comment">// ååºåˆ—åŒ–</span>\n        <span class="token class-name">Goods</span> goods1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>goodsJson<span class="token punctuation">,</span> <span class="token class-name">Goods</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goods1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * Goods(name=iPhone, price=null)\n * <span class="token punctuation">{</span>&quot;name&quot;:&quot;iPhone&quot;<span class="token punctuation">}</span>\n * Goods(name=iPhone, price=null)\n */</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div>',3),m={},d=(0,a(66262).A)(m,[["render",function(n,s){const a=(0,p.g2)("OutboundLink");return(0,p.uX)(),(0,p.CE)(p.FK,null,[(0,p.Lk)("p",null,[(0,p.Lk)("a",e,[(0,p.eW)("Source Code"),(0,p.bF)(a)])]),t,(0,p.Lk)("p",null,[(0,p.Lk)("a",o,[(0,p.eW)("Intellij IDEA å¦‚ä½•è‡ªåŠ¨ç”Ÿæˆ serialVersionUID-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ (tencent.com)"),(0,p.bF)(a)]),(0,p.eW)(" æ ¹æ®æç¤ºè®¾ç½®åä¹‹åï¼Œéœ€è¦é‡å¯idea.")]),c,(0,p.Lk)("p",null,[(0,p.Lk)("a",l,[(0,p.eW)("Intellij IDEA å¦‚ä½•è‡ªåŠ¨ç”Ÿæˆ serialVersionUID-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ (tencent.com)"),(0,p.bF)(a)]),(0,p.eW)(" æ ¹æ®æç¤ºè®¾ç½®åä¹‹åï¼Œéœ€è¦é‡å¯idea.")]),u,(0,p.Lk)("ul",null,[i,r,(0,p.Lk)("li",null,[(0,p.eW)("jsonæ ¼å¼fastjson(é˜¿é‡Œå·´å·´å…¬å¸å¼€æº)å’Œgson(googleå…¬å¸å¼€æº) "),(0,p.Lk)("ul",null,[(0,p.Lk)("li",null,[(0,p.eW)("ç›®å‰fastjsonå‡çº§åˆ°äº†fastjson2ï¼Œæ€§èƒ½æ›´åŠ æé«˜"),(0,p.Lk)("a",k,[(0,p.eW)("å†è§ Fastjsonï¼Fastjson 2 æ­£å¼å‘å¸ƒ"),(0,p.bF)(a)])])])])]),b],64)}]])},66262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}}}]);